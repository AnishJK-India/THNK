{
  "author": "",
  "category": "Network",
  "extensionNamespace": "",
  "fullName": "THNK framework - Core",
  "helpPath": "https://thnk.cloud/docs/getting-started/",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iODUuMjg1OThtbSIKICAgaGVpZ2h0PSI5MC43MDg3MDJtbSIKICAgdmlld0JveD0iMCAwIDg1LjI4NTk4IDkwLjcwODcwMiIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnNDcwMiIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC45Mi41ICgyMDYwZWMxZjlmLCAyMDIwLTA0LTA4KSIKICAgc29kaXBvZGk6ZG9jbmFtZT0iTG9nby1UcmFuc3BhcmVudC5zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Njk2IiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSIwLjM1IgogICAgIGlua3NjYXBlOmN4PSItMzgwLjI1ODIzIgogICAgIGlua3NjYXBlOmN5PSIyMzkuOTg5NTYiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9Im1tIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSIKICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwNTMiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIgLz4KICA8bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGE0Njk5Ij4KICAgIDxyZGY6UkRGPgogICAgICA8Y2M6V29yawogICAgICAgICByZGY6YWJvdXQ9IiI+CiAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICAgICAgPGRjOnR5cGUKICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPgogICAgICAgIDxkYzp0aXRsZT48L2RjOnRpdGxlPgogICAgICA8L2NjOldvcms+CiAgICA8L3JkZjpSREY+CiAgPC9tZXRhZGF0YT4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSIKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzUuMjIwMTA4LC0xMjEuNjIxODcpIj4KICAgIDxnCiAgICAgICBpZD0iZzMzNjItMy0xLTIiCiAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgxLjEzMjI4NjcsMCwwLDEuMTMyMjg2Nyw1MTMuNTQyNTcsLTE3MzIuMzQ5OCkiCiAgICAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9Ii9ob21lL21pZGhpbC9QaWN0dXJlcy9USE5LL1BORy9CYW5uZXIvQmFubmVyLVR5cGUtMkItUGxhaW4ucG5nIgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjEzMS42MjQxNiIKICAgICAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSIxMzEuNjI0MTYiPgogICAgICA8ZwogICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjIwNTE5NzQsMzUuNzE0ODUxKSIKICAgICAgICAgaWQ9ImczMzI4LTUtNC02Ij4KICAgICAgICA8cGF0aAogICAgICAgICAgIHNvZGlwb2RpOm9wZW49InRydWUiCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LXlkcGk9IjE2OS44NTc4MiIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQteGRwaT0iMTY5Ljg1NzgyIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC1maWxlbmFtZT0iL2hvbWUvbWlkaGlsL0RvY3VtZW50cy9USE5LLVY1LjEucG5nIgogICAgICAgICAgIGQ9Im0gLTEyNzcuMjIzNCwtMTA0MS4wNDU2IGEgNDMuMjc5OTE1LDE0LjQyNjY0MiAwIDAgMSAtMTQuODQ3NywxMi4yNTQ1IDQzLjI3OTkxNSwxNC40MjY2NDIgMCAwIDEgLTM4LjU1NTQsMy4wODE5IgogICAgICAgICAgIHNvZGlwb2RpOmVuZD0iMS44MTEyMzMiCiAgICAgICAgICAgc29kaXBvZGk6c3RhcnQ9IjYuMTkxMjI2MSIKICAgICAgICAgICBzb2RpcG9kaTpyeT0iMTQuNDI2NjQyIgogICAgICAgICAgIHNvZGlwb2RpOnJ4PSI0My4yNzk5MTUiCiAgICAgICAgICAgc29kaXBvZGk6Y3k9Ii0xMDM5LjcyMDgiCiAgICAgICAgICAgc29kaXBvZGk6Y3g9Ii0xMzIwLjMyMDQiCiAgICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuNzgzMTQ2MzMsLTAuNjIxODM3NDYsLTAuNjIxODM3NDYsLTAuNzgzMTQ2MzMsMCwwKSIKICAgICAgICAgICBpZD0icGF0aDEzMTYtNy04LTYtNy0wLTgzLTktOC01LTItNy02LTk3LTItNy02LTkyLTEiCiAgICAgICAgICAgc3R5bGU9Im9wYWNpdHk6MTt2ZWN0b3ItZWZmZWN0Om5vbmU7ZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMjEyNTI5O3N0cm9rZS13aWR0aDo4Ljg2OTkzMjE3O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICBzb2RpcG9kaTpvcGVuPSJ0cnVlIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSIxNjkuODU3ODIiCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjE2OS44NTc4MiIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9Ii9ob21lL21pZGhpbC9Eb2N1bWVudHMvVEhOSy1WNS4xLnBuZyIKICAgICAgICAgICBkPSJtIDEyMzMuMTUyLDg3OC4zNTY4NCBhIDYzLjYzOTkyMywyMi40MzEzODUgMCAwIDEgMzcuMTA4OSwxNS43NjE5NyA2My42Mzk5MjMsMjIuNDMxMzg1IDAgMCAxIC0xNC42ODk3LDE5LjgxNzA1IgogICAgICAgICAgIHNvZGlwb2RpOmVuZD0iMC43Mjk2ODIwOSIKICAgICAgICAgICBzb2RpcG9kaTpzdGFydD0iNS4xMTYzOTM5IgogICAgICAgICAgIHNvZGlwb2RpOnJ5PSIyMi40MzEzODUiCiAgICAgICAgICAgc29kaXBvZGk6cng9IjYzLjYzOTkyMyIKICAgICAgICAgICBzb2RpcG9kaTpjeT0iODk4Ljk4MjM2IgogICAgICAgICAgIHNvZGlwb2RpOmN4PSIxMjA4LjEzNDkiCiAgICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KC0wLjY5OTc4MjkyLDAuNzE0MzU1NTYsMC41MjU0NzIyNiwwLjg1MDgxMDczLDAsMCkiCiAgICAgICAgICAgaWQ9InBhdGgxMzE2LTctOC02LTctMC04My05LTAtOS0yNC02LTUtMC01LTUtOC0yLTAtMCIKICAgICAgICAgICBzdHlsZT0ib3BhY2l0eToxO3ZlY3Rvci1lZmZlY3Q6bm9uZTtmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyMTI1Mjk7c3Ryb2tlLXdpZHRoOjguMDQyOTM4MjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgICAgICA8Y2lyY2xlCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LXlkcGk9IjE2OS44NTc4MiIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQteGRwaT0iMTY5Ljg1NzgyIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC1maWxlbmFtZT0iL2hvbWUvbWlkaGlsL0RvY3VtZW50cy9USE5LLVY1LjEucG5nIgogICAgICAgICAgIHI9IjMzLjU1OTM5NSIKICAgICAgICAgICBjeT0iMTY0MC4yNTI3IgogICAgICAgICAgIGN4PSItMzgwLjg4MjA1IgogICAgICAgICAgIGlkPSJwYXRoMjQzOS04LTQtMC0wLTQtNy04LTMtNy0yLTktNi02IgogICAgICAgICAgIHN0eWxlPSJvcGFjaXR5OjE7dmVjdG9yLWVmZmVjdDpub25lO2ZpbGw6I2Y4ZjlmYTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6OC4yNjQ3OTM0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICBzb2RpcG9kaTpvcGVuPSJ0cnVlIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSIxNjkuODU3ODIiCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjE2OS44NTc4MiIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9Ii9ob21lL21pZGhpbC9Eb2N1bWVudHMvVEhOSy1WNS5wbmciCiAgICAgICAgICAgZD0ibSAtMTM1Ni40MTIsLTEwNDcuNDY5NSBhIDQzLjI3OTkxNSwxNC40MjY2NDIgMCAwIDEgMjguODk5NywtOC4xNTg5IgogICAgICAgICAgIHNvZGlwb2RpOmVuZD0iNC40NjI1MTQyIgogICAgICAgICAgIHNvZGlwb2RpOnN0YXJ0PSIzLjU1NjgyNDMiCiAgICAgICAgICAgc29kaXBvZGk6cnk9IjE0LjQyNjY0MiIKICAgICAgICAgICBzb2RpcG9kaTpyeD0iNDMuMjc5OTE1IgogICAgICAgICAgIHNvZGlwb2RpOmN5PSItMTA0MS42NDk4IgogICAgICAgICAgIHNvZGlwb2RpOmN4PSItMTMxNi44MDk5IgogICAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLjc4MzE0NjMzLC0wLjYyMTgzNzQ2LC0wLjYyMTgzNzQ2LC0wLjc4MzE0NjMzLDAsMCkiCiAgICAgICAgICAgaWQ9InBhdGgxMzE2LTctOC02LTctMC04My05LTYtOC0zNi0zLTgtNC01LTEtOC0xIgogICAgICAgICAgIHN0eWxlPSJvcGFjaXR5OjE7dmVjdG9yLWVmZmVjdDpub25lO2ZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzIxMjUyOTtzdHJva2Utd2lkdGg6OC44Njk5MzIxNztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MDtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgc29kaXBvZGk6b3Blbj0idHJ1ZSIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQteWRwaT0iMTY5Ljg1NzgyIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC14ZHBpPSIxNjkuODU3ODIiCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LWZpbGVuYW1lPSIvaG9tZS9taWRoaWwvRG9jdW1lbnRzL1RITkstVjUucG5nIgogICAgICAgICAgIGQ9Im0gLTE0MjAuODcyMSwtOTYzLjAwMzE5IGEgNDAuMjMxODYxLDEzLjQxMDYyNiAwIDAgMSAxOS45Nzk4LC0xMS43NTEzMiIKICAgICAgICAgICBzb2RpcG9kaTplbmQ9IjQuMTg0OTYyMSIKICAgICAgICAgICBzb2RpcG9kaTpzdGFydD0iMy4xMjk0Mjc5IgogICAgICAgICAgIHNvZGlwb2RpOnJ5PSIxMy40MTA2MjYiCiAgICAgICAgICAgc29kaXBvZGk6cng9IjQwLjIzMTg2MSIKICAgICAgICAgICBzb2RpcG9kaTpjeT0iLTk2My4xNjYzMiIKICAgICAgICAgICBzb2RpcG9kaTpjeD0iLTEzODAuNjQzMiIKICAgICAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC43NDIzNDI1NiwtMC42NzAwMjA1NCwtMC42NzAwMjA1NCwtMC43NDIzNDI1NiwwLDApIgogICAgICAgICAgIGlkPSJwYXRoMTMxNi03LTgtNi03LTAtODMtOS03LTYtMC03LTctOC05LTMtMi05LTUiCiAgICAgICAgICAgc3R5bGU9Im9wYWNpdHk6MTt2ZWN0b3ItZWZmZWN0Om5vbmU7ZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMjEyNTI5O3N0cm9rZS13aWR0aDo4LjI0NTI1NTQ3O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICBzb2RpcG9kaTpvcGVuPSJ0cnVlIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSIxNjkuODU3ODIiCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjE2OS44NTc4MiIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9Ii9ob21lL21pZGhpbC9Eb2N1bWVudHMvVEhOSy1WNS5wbmciCiAgICAgICAgICAgZD0ibSA5NzkuMzA2NzksLTEzODYuODQ4NSBhIDQwLjIzMTg1NywxMy40MTA2MjYgMCAwIDEgMTMuNzA0MDUsLTcuNDQ2NSIKICAgICAgICAgICBzb2RpcG9kaTplbmQ9IjQuMDIzNjAxNSIKICAgICAgICAgICBzb2RpcG9kaTpzdGFydD0iMy4zNjAwNzEiCiAgICAgICAgICAgc29kaXBvZGk6cnk9IjEzLjQxMDYyNiIKICAgICAgICAgICBzb2RpcG9kaTpyeD0iNDAuMjMxODU3IgogICAgICAgICAgIHNvZGlwb2RpOmN5PSItMTM4My45NDE4IgogICAgICAgICAgIHNvZGlwb2RpOmN4PSIxMDE4LjU4MjMiCiAgICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgIHRyYW5zZm9ybT0icm90YXRlKDE1OC40NTA0NCkiCiAgICAgICAgICAgaWQ9InBhdGgxMzE2LTctOC02LTctMC04My05LTctMC02LTUtOS03LTItMy05LTQtNy0yLTkiCiAgICAgICAgICAgc3R5bGU9Im9wYWNpdHk6MTt2ZWN0b3ItZWZmZWN0Om5vbmU7ZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMjEyNTI5O3N0cm9rZS13aWR0aDo4LjI0NTI1NDUyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICBzb2RpcG9kaTpvcGVuPSJ0cnVlIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSIxNjkuODU3ODIiCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjE2OS44NTc4MiIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9Ii9ob21lL21pZGhpbC9Eb2N1bWVudHMvVEhOSy1WNS4xLnBuZyIKICAgICAgICAgICBkPSJtIC0xMzA2LjIyNjksLTEwNTIuNjQxNyBhIDQzLjI3OTkxNSwxNC40MjY2NDIgMCAwIDEgMjguNzY3NywxMS4zMjA2IgogICAgICAgICAgIHNvZGlwb2RpOmVuZD0iNi4xMjA0NjA1IgogICAgICAgICAgIHNvZGlwb2RpOnN0YXJ0PSI1LjA0MDMzNjYiCiAgICAgICAgICAgc29kaXBvZGk6cnk9IjE0LjQyNjY0MiIKICAgICAgICAgICBzb2RpcG9kaTpyeD0iNDMuMjc5OTE1IgogICAgICAgICAgIHNvZGlwb2RpOmN5PSItMTAzOC45ODM5IgogICAgICAgICAgIHNvZGlwb2RpOmN4PSItMTMyMC4xNjc0IgogICAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLjc4MzE0NjMzLC0wLjYyMTgzNzQ2LC0wLjYyMTgzNzQ2LC0wLjc4MzE0NjMzLDAsMCkiCiAgICAgICAgICAgaWQ9InBhdGgxMzE2LTctOC02LTctMC04My05LTYtOC0xLTMtMC0xLTQtOS0wLTYtNCIKICAgICAgICAgICBzdHlsZT0ib3BhY2l0eToxO3ZlY3Rvci1lZmZlY3Q6bm9uZTtmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMyMTI1Mjk7c3Ryb2tlLXdpZHRoOjguODY5OTMyMTc7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgICAgICA8cGF0aAogICAgICAgICAgIHNvZGlwb2RpOm9wZW49InRydWUiCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LXlkcGk9IjE2OS44NTc4MiIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQteGRwaT0iMTY5Ljg1NzgyIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC1maWxlbmFtZT0iL2hvbWUvbWlkaGlsL0RvY3VtZW50cy9USE5LLVY1LnBuZyIKICAgICAgICAgICBkPSJtIC0yMjMuNDA4MDUsLTE2OTguODI1OSBhIDQwLjIzMTg2MSwxMy40MTA2MjYgMCAwIDEgMTQuNjU3NDUsLTEwLjUxNjMiCiAgICAgICAgICAgc29kaXBvZGk6ZW5kPSI0LjAyMzYwMTUiCiAgICAgICAgICAgc29kaXBvZGk6c3RhcnQ9IjMuMTI5NDI3OSIKICAgICAgICAgICBzb2RpcG9kaTpyeT0iMTMuNDEwNjI2IgogICAgICAgICAgIHNvZGlwb2RpOnJ4PSI0MC4yMzE4NjEiCiAgICAgICAgICAgc29kaXBvZGk6Y3k9Ii0xNjk4Ljk4OSIKICAgICAgICAgICBzb2RpcG9kaTpjeD0iLTE4My4xNzkxNyIKICAgICAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC45OTM0NzM1NywwLjExNDA2MjU3LDAuMTE0MDYyNTcsLTAuOTkzNDczNTcsMCwwKSIKICAgICAgICAgICBpZD0icGF0aDEzMTYtNy04LTYtNy0wLTgzLTktNy0wLTEtOC0wLTQtNS04LTUtMC05LTY0LTkiCiAgICAgICAgICAgc3R5bGU9Im9wYWNpdHk6MTt2ZWN0b3ItZWZmZWN0Om5vbmU7ZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMjEyNTI5O3N0cm9rZS13aWR0aDo4LjI0NTI1NTQ3O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICAgICAgPGNpcmNsZQogICAgICAgICAgIHI9IjEwLjIyMzUyNCIKICAgICAgICAgICBjeT0iMTYyOS45MjkyIgogICAgICAgICAgIGN4PSItNDAxLjEyMTczIgogICAgICAgICAgIGlkPSJwYXRoNTQ5Ny01LTktOS0yLTMtOS0wIgogICAgICAgICAgIHN0eWxlPSJvcGFjaXR5OjE7dmVjdG9yLWVmZmVjdDpub25lO2ZpbGw6IzIxMjUyOTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6OC43MjUxODE1ODtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9Ii9ob21lL21pZGhpbC9Eb2N1bWVudHMvVEhOSy1WNS4xLnBuZyIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQteGRwaT0iMTY5Ljg1NzgyIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSIxNjkuODU3ODIiIC8+CiAgICAgICAgPGNpcmNsZQogICAgICAgICAgIHI9IjEwLjIyMzUyNCIKICAgICAgICAgICBjeT0iMTYzNC41NDQ0IgogICAgICAgICAgIGN4PSItMzY4LjMzOTYiCiAgICAgICAgICAgaWQ9InBhdGg1NDk3LTYtNS02LTMtMC02LTUtOSIKICAgICAgICAgICBzdHlsZT0ib3BhY2l0eToxO3ZlY3Rvci1lZmZlY3Q6bm9uZTtmaWxsOiMyMTI1Mjk7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjguNzI1MTgxNTg7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LWZpbGVuYW1lPSIvaG9tZS9taWRoaWwvRG9jdW1lbnRzL1RITkstVjUuMS5wbmciCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjE2OS44NTc4MiIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQteWRwaT0iMTY5Ljg1NzgyIiAvPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgc29kaXBvZGk6b3Blbj0idHJ1ZSIKICAgICAgICAgICBpbmtzY2FwZTpleHBvcnQteWRwaT0iMTY5Ljg1NzgyIgogICAgICAgICAgIGlua3NjYXBlOmV4cG9ydC14ZHBpPSIxNjkuODU3ODIiCiAgICAgICAgICAgaW5rc2NhcGU6ZXhwb3J0LWZpbGVuYW1lPSIvaG9tZS9taWRoaWwvRG9jdW1lbnRzL1RITkstVjUuMS5wbmciCiAgICAgICAgICAgZD0ibSAxMjYzLjU0NTUsODg3Ljk0OTg2IGEgNjMuNjM5OTIzLDIyLjQzMTM4NSAwIDAgMSAtMTYuODM5MSwyOC44NzQzNSIKICAgICAgICAgICBzb2RpcG9kaTplbmQ9IjAuOTE5NjYxNDUiCiAgICAgICAgICAgc29kaXBvZGk6c3RhcnQ9IjUuNzY4OTkxNCIKICAgICAgICAgICBzb2RpcG9kaTpyeT0iMjIuNDMxMzg1IgogICAgICAgICAgIHNvZGlwb2RpOnJ4PSI2My42Mzk5MjMiCiAgICAgICAgICAgc29kaXBvZGk6Y3k9Ijg5OC45ODIzNiIKICAgICAgICAgICBzb2RpcG9kaTpjeD0iMTIwOC4xMzQ5IgogICAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgtMC42OTk3ODI5MiwwLjcxNDM1NTU2LDAuNTI1NDcyMjYsMC44NTA4MTA3MywwLDApIgogICAgICAgICAgIGlkPSJwYXRoMTMxNi03LTgtNi03LTAtODMtOS0wLTktMjQtNi01LTAtNi00LTUtMS0wLTA0LTEiCiAgICAgICAgICAgc3R5bGU9Im9wYWNpdHk6MTt2ZWN0b3ItZWZmZWN0Om5vbmU7ZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMjEyNTI5O3N0cm9rZS13aWR0aDo4LjA0MjkzODIzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICAgIDwvZz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=",
  "name": "THNK",
  "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/Glyphster Pack/Master/SVG/Videogames/Videogames_online_gaming_games_joystick_connect_globe.svg",
  "shortDescription": "A framework to build authoritative multiplayer games.",
  "version": "1.0.0",
  "description": [
    "# The THNK Framework",
    "",
    "A framework for building authoritative games with GDevelop. In a single click, you can turn your THNK game multiplayer!",
    "",
    "Games made with THNK multiplayer will, through a mix of imposed rules and a rich set of optimisations & performant features, run fast as state-of-the-art multiplayer games.",
    "",
    "This - the core THNK extension - allows you to build any game with the authoritative server-client pattern. They will not be multiplayer: by default, all THNK games are single player and will run fine without being connected to anyone else. When/if you want to add multiplayer, THNK servers can be started and connected to in 1 action via the different THNK adapter extensions.",
    "",
    "Learn more at https://thnk.cloud/ ;)"
  ],
  "tags": [
    "multiplayer",
    "arthuro",
    "thnk",
    "thonk",
    "think",
    "server",
    "client",
    "authoritative",
    "easy"
  ],
  "authorIds": [
    "ZgrsWuRTAkXgeuPV9bo0zuEcA2w1"
  ],
  "dependencies": [],
  "eventsFunctions": [
    {
      "fullName": "",
      "functionType": "Action",
      "name": "onFirstSceneLoaded",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "}// Load THNK library (https://github.com/arthuro555/THNK)\nwindow.THNK=(()=>{var ds=Object.defineProperty;var Ia=Object.getOwnPropertyDescriptor;var xa=Object.getOwnPropertyNames;var Ca=Object.prototype.hasOwnProperty;var Ua=(t,e)=>{for(var s in e)ds(t,s,{get:e[s],enumerable:!0})},Va=(t,e,s,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let n of xa(e))!Ca.call(t,n)&&n!==s&&ds(t,n,{get:()=>e[n],enumerable:!(i=Ia(e,n))||i.enumerable});return t};var Da=t=>Va(ds({},\"__esModule\",{value:!0}),t);var Od={};Ua(Od,{ClientAdapter:()=>vd,ServerAdapter:()=>Sd,client:()=>Fn,players:()=>wn,server:()=>an,settings:()=>An});var Ta=Object.defineProperty,be=(t,e)=>{for(var s in e)Ta(t,s,{get:e[s],enumerable:!0})},an={};be(an,{PlayerBehavior:()=>gn,events:()=>kr,startServer:()=>Or});var zt=new Int32Array(2),si=new Float32Array(zt.buffer),ii=new Float64Array(zt.buffer),Le=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,Is;(function(t){t[t.UTF8_BYTES=1]=\"UTF8_BYTES\",t[t.UTF16_STRING=2]=\"UTF16_STRING\"})(Is||(Is={}));var Dt=class{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new Dt(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return zt[0]=this.readInt32(t),si[0]}readFloat64(t){return zt[Le?0:1]=this.readInt32(t),zt[Le?1:0]=this.readInt32(t+4),ii[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}writeUint64(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}writeFloat32(t,e){si[0]=e,this.writeInt32(t,zt[0])}writeFloat64(t,e){ii[0]=e,this.writeInt32(t,zt[Le?0:1]),this.writeInt32(t+4,zt[Le?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error(\"FlatBuffers: ByteBuffer is too short to contain an identifier.\");let t=\"\";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){let s=t-this.readInt32(t);return e<this.readInt16(s)?this.readInt16(s+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);let s=this.readInt32(t);t+=4;let i=this.bytes_.subarray(t,t+s);return e===Is.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,e){return typeof t==\"string\"?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=4)throw new Error(\"FlatBuffers: file identifier must be length \"+4);for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createScalarList(t,e){let s=[];for(let i=0;i<e;++i)t(i)!==null&&s.push(t(i));return s}createObjList(t,e){let s=[];for(let i=0;i<e;++i){let n=t(i);n!==null&&s.push(n.unpack())}return s}},Gt=class{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let e;t?e=t:e=1024,this.bb=Dt.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);let s=~(this.bb.capacity()-this.space+e)+1&t-1;for(;this.space<s+t+e;){let i=this.bb.capacity();this.bb=Gt.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(s)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,s){(this.force_defaults||e!=s)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,s){(this.force_defaults||e!=s)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,s){(this.force_defaults||e!=s)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,s){(this.force_defaults||e!==s)&&(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,s){(this.force_defaults||e!=s)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,s){(this.force_defaults||e!=s)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,s){(this.force_defaults||e!=s)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,s){e!=s&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error(\"FlatBuffers: struct must be serialized inline.\")}notNested(){if(this.isNested)throw new Error(\"FlatBuffers: object serialization must not be nested.\")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){let e=t.capacity();if(e&3221225472)throw new Error(\"FlatBuffers: cannot grow buffer beyond 2 gigabytes.\");let s=e<<1,i=Dt.allocate(s);return i.setPosition(s-e),i.bytes().set(t.bytes(),s-e),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error(\"FlatBuffers: endObject called without startObject\");this.addInt32(0);let t=this.offset(),e=this.vtable_in_use-1;for(;e>=0&&this.vtable[e]==0;e--);let s=e+1;for(;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);let i=2;this.addInt16(t-this.object_start);let n=(s+i)*2;this.addInt16(n);let a=0,r=this.space;t:for(e=0;e<this.vtables.length;e++){let o=this.bb.capacity()-this.vtables[e];if(n==this.bb.readInt16(o)){for(let c=2;c<n;c+=2)if(this.bb.readInt16(r+c)!=this.bb.readInt16(o+c))continue t;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,s){let i=s?4:0;if(e){let n=e;if(this.prep(this.minalign,4+4+i),n.length!=4)throw new Error(\"FlatBuffers: file identifier must be length \"+4);for(let a=4-1;a>=0;a--)this.writeInt8(n.charCodeAt(a))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){let s=this.bb.capacity()-t,i=s-this.bb.readInt32(s);if(this.bb.readInt16(i+e)==0)throw new Error(\"FlatBuffers: field \"+e+\" must be set\")}startVector(t,e,s){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(s,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);let e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(t==null)return 0;let e;t instanceof Uint8Array?e=t:e=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let s=0,i=this.space,n=this.bb.bytes();s<e.length;s++)n[i++]=e[s];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t==\"string\"?this.createString(t):t.pack(this)}createObjectOffsetList(t){let e=[];for(let s=0;s<t.length;++s){let i=t[s];if(i!==null)e.push(this.createObjectOffset(i));else throw new Error(\"FlatBuffers: Argument for createObjectOffsetList cannot contain null.\")}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}},jt=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsClientInputMessage(t,e){return(e||new jt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsClientInputMessage(t,e){return t.setPosition(t.position()+4),(e||new jt).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}content(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}contentLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}contentArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startClientInputMessage(t){t.startObject(2)}static addName(t,e){t.addFieldOffset(0,e,0)}static addContent(t,e){t.addFieldOffset(1,e,0)}static createContentVector(t,e){t.startVector(1,e.length,1);for(let s=e.length-1;s>=0;s--)t.addInt8(e[s]);return t.endVector()}static startContentVector(t,e){t.startVector(1,e,1)}static endClientInputMessage(t){let e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createClientInputMessage(t,e,s){return jt.startClientInputMessage(t),jt.addName(t,e),jt.addContent(t,s),jt.endClientInputMessage(t)}},Ft=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsConnectionRequestMessage(t,e){return(e||new Ft).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsConnectionRequestMessage(t,e){return t.setPosition(t.position()+4),(e||new Ft).__init(t.readInt32(t.position())+t.position(),t)}token(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}static startConnectionRequestMessage(t){t.startObject(1)}static addToken(t,e){t.addFieldOffset(0,e,0)}static endConnectionRequestMessage(t){return t.endObject()}static createConnectionRequestMessage(t,e){return Ft.startConnectionRequestMessage(t),Ft.addToken(t,e),Ft.endConnectionRequestMessage(t)}},At=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsClientMessage(t,e){return(e||new At).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsClientMessage(t,e){return t.setPosition(t.position()+4),(e||new At).__init(t.readInt32(t.position())+t.position(),t)}contentType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0}content(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__union(t,this.bb_pos+e):null}static startClientMessage(t){t.startObject(2)}static addContentType(t,e){t.addFieldInt8(0,e,0)}static addContent(t,e){t.addFieldOffset(1,e,0)}static endClientMessage(t){let e=t.endObject();return t.requiredField(e,6),e}static createClientMessage(t,e,s){return At.startClientMessage(t),At.addContentType(t,e),At.addContent(t,s),At.endClientMessage(t)}},B=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsVariable(t,e){return(e||new B).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsVariable(t,e){return t.setPosition(t.position()+4),(e||new B).__init(t.readInt32(t.position())+t.position(),t)}type(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0}text(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}number(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb_pos+t):0}boolean(){let t=this.bb.__offset(this.bb_pos,10);return t?!!this.bb.readInt8(this.bb_pos+t):!1}operations(t,e){let s=this.bb.__offset(this.bb_pos,12);return s?(e||new Q).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}operationsLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startVariable(t){t.startObject(5)}static addType(t,e){t.addFieldInt8(0,e,0)}static addText(t,e){t.addFieldOffset(1,e,0)}static addNumber(t,e){t.addFieldFloat32(2,e,0)}static addBoolean(t,e){t.addFieldInt8(3,+e,0)}static addOperations(t,e){t.addFieldOffset(4,e,0)}static createOperationsVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startOperationsVector(t,e){t.startVector(4,e,4)}static endVariable(t){return t.endObject()}static createVariable(t,e,s,i,n,a){return B.startVariable(t),B.addType(t,e),B.addText(t,s),B.addNumber(t,i),B.addBoolean(t,n),B.addOperations(t,a),B.endVariable(t)}},Q=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsCollectionOperation(t,e){return(e||new Q).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCollectionOperation(t,e){return t.setPosition(t.position()+4),(e||new Q).__init(t.readInt32(t.position())+t.position(),t)}operation(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0}name(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}index(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint16(this.bb_pos+t):0}val(t){let e=this.bb.__offset(this.bb_pos,10);return e?(t||new B).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startCollectionOperation(t){t.startObject(4)}static addOperation(t,e){t.addFieldInt8(0,e,0)}static addName(t,e){t.addFieldOffset(1,e,0)}static addIndex(t,e){t.addFieldInt16(2,e,0)}static addVal(t,e){t.addFieldOffset(3,e,0)}static endCollectionOperation(t){return t.endObject()}},Zs=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}r(){return this.bb.readUint16(this.bb_pos)}g(){return this.bb.readUint16(this.bb_pos+2)}b(){return this.bb.readUint16(this.bb_pos+4)}static sizeOf(){return 6}static createRGB(t,e,s,i){return t.prep(2,6),t.writeInt16(i),t.writeInt16(s),t.writeInt16(e),t.offset()}},C=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsObjState(t,e){return(e||new C).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsObjState(t,e){return t.setPosition(t.position()+4),(e||new C).__init(t.readInt32(t.position())+t.position(),t)}x(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb_pos+t):null}y(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb_pos+t):null}height(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb_pos+t):null}width(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):null}angle(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat32(this.bb_pos+t):null}scale(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat32(this.bb_pos+t):null}tint(t){let e=this.bb.__offset(this.bb_pos,16);return e?(t||new Zs).__init(this.bb_pos+e,this.bb):null}setXTo0(){let t=this.bb.__offset(this.bb_pos,18);return t?!!this.bb.readInt8(this.bb_pos+t):!1}setYTo0(){let t=this.bb.__offset(this.bb_pos,20);return t?!!this.bb.readInt8(this.bb_pos+t):!1}setHeightTo0(){let t=this.bb.__offset(this.bb_pos,22);return t?!!this.bb.readInt8(this.bb_pos+t):!1}setWidthTo0(){let t=this.bb.__offset(this.bb_pos,24);return t?!!this.bb.readInt8(this.bb_pos+t):!1}setAngleTo0(){let t=this.bb.__offset(this.bb_pos,26);return t?!!this.bb.readInt8(this.bb_pos+t):!1}setScaleTo0(){let t=this.bb.__offset(this.bb_pos,28);return t?!!this.bb.readInt8(this.bb_pos+t):!1}zOrder(){let t=this.bb.__offset(this.bb_pos,30);return t?this.bb.readUint16(this.bb_pos+t):null}bigZOrder(){let t=this.bb.__offset(this.bb_pos,32);return t?this.bb.readUint32(this.bb_pos+t):null}visible(){let t=this.bb.__offset(this.bb_pos,34);return t?this.bb.readUint8(this.bb_pos+t):null}flippedX(){let t=this.bb.__offset(this.bb_pos,36);return t?this.bb.readUint8(this.bb_pos+t):null}flippedY(){let t=this.bb.__offset(this.bb_pos,38);return t?this.bb.readUint8(this.bb_pos+t):null}opacity(){let t=this.bb.__offset(this.bb_pos,40);return t?this.bb.readUint8(this.bb_pos+t):null}setOpacityTo0(){let t=this.bb.__offset(this.bb_pos,42);return t?!!this.bb.readInt8(this.bb_pos+t):!1}animation(){let t=this.bb.__offset(this.bb_pos,44);return t?this.bb.readUint8(this.bb_pos+t):null}text(t){let e=this.bb.__offset(this.bb_pos,46);return e?this.bb.__string(this.bb_pos+e,t):null}static startObjState(t){t.startObject(22)}static addX(t,e){t.addFieldFloat32(0,e,0)}static addY(t,e){t.addFieldFloat32(1,e,0)}static addHeight(t,e){t.addFieldFloat32(2,e,0)}static addWidth(t,e){t.addFieldFloat32(3,e,0)}static addAngle(t,e){t.addFieldFloat32(4,e,0)}static addScale(t,e){t.addFieldFloat32(5,e,0)}static addTint(t,e){t.addFieldStruct(6,e,0)}static addSetXTo0(t,e){t.addFieldInt8(7,+e,0)}static addSetYTo0(t,e){t.addFieldInt8(8,+e,0)}static addSetHeightTo0(t,e){t.addFieldInt8(9,+e,0)}static addSetWidthTo0(t,e){t.addFieldInt8(10,+e,0)}static addSetAngleTo0(t,e){t.addFieldInt8(11,+e,0)}static addSetScaleTo0(t,e){t.addFieldInt8(12,+e,0)}static addZOrder(t,e){t.addFieldInt16(13,e,0)}static addBigZOrder(t,e){t.addFieldInt32(14,e,0)}static addVisible(t,e){t.addFieldInt8(15,e,0)}static addFlippedX(t,e){t.addFieldInt8(16,e,0)}static addFlippedY(t,e){t.addFieldInt8(17,e,0)}static addOpacity(t,e){t.addFieldInt8(18,e,0)}static addSetOpacityTo0(t,e){t.addFieldInt8(19,+e,0)}static addAnimation(t,e){t.addFieldInt8(20,e,0)}static addText(t,e){t.addFieldOffset(21,e,0)}static endObjState(t){return t.endObject()}},K=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGameObject(t,e){return(e||new K).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGameObject(t,e){return t.setPosition(t.position()+4),(e||new K).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint16(this.bb_pos+t):0}name(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}objState(t){let e=this.bb.__offset(this.bb_pos,8);return e?(t||new C).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}publicStateDiff(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}publicStateDiffLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}publicStateDiffArray(){let t=this.bb.__offset(this.bb_pos,10);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}privateStateDiff(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}privateStateDiffLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}privateStateDiffArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}packedPublicState(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}packedPublicStateLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}packedPublicStateArray(){let t=this.bb.__offset(this.bb_pos,14);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}packedPrivateState(t){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}packedPrivateStateLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}packedPrivateStateArray(){let t=this.bb.__offset(this.bb_pos,16);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startGameObject(t){t.startObject(7)}static addId(t,e){t.addFieldInt16(0,e,0)}static addName(t,e){t.addFieldOffset(1,e,0)}static addObjState(t,e){t.addFieldOffset(2,e,0)}static addPublicStateDiff(t,e){t.addFieldOffset(3,e,0)}static createPublicStateDiffVector(t,e){t.startVector(1,e.length,1);for(let s=e.length-1;s>=0;s--)t.addInt8(e[s]);return t.endVector()}static startPublicStateDiffVector(t,e){t.startVector(1,e,1)}static addPrivateStateDiff(t,e){t.addFieldOffset(4,e,0)}static createPrivateStateDiffVector(t,e){t.startVector(1,e.length,1);for(let s=e.length-1;s>=0;s--)t.addInt8(e[s]);return t.endVector()}static startPrivateStateDiffVector(t,e){t.startVector(1,e,1)}static addPackedPublicState(t,e){t.addFieldOffset(5,e,0)}static createPackedPublicStateVector(t,e){t.startVector(1,e.length,1);for(let s=e.length-1;s>=0;s--)t.addInt8(e[s]);return t.endVector()}static startPackedPublicStateVector(t,e){t.startVector(1,e,1)}static addPackedPrivateState(t,e){t.addFieldOffset(6,e,0)}static createPackedPrivateStateVector(t,e){t.startVector(1,e.length,1);for(let s=e.length-1;s>=0;s--)t.addInt8(e[s]);return t.endVector()}static startPackedPrivateStateVector(t,e){t.startVector(1,e,1)}static endGameObject(t){return t.endObject()}},$=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGameStateSnapshot(t,e){return(e||new $).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGameStateSnapshot(t,e){return t.setPosition(t.position()+4),(e||new $).__init(t.readInt32(t.position())+t.position(),t)}objects(t,e){let s=this.bb.__offset(this.bb_pos,4);return s?(e||new K).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}objectsLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}publicStatePacked(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}publicStatePackedLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}publicStatePackedArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}privateStatePacked(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}privateStatePackedLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}privateStatePackedArray(){let t=this.bb.__offset(this.bb_pos,8);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}ownedObjects(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+t*2):0}ownedObjectsLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}ownedObjectsArray(){let t=this.bb.__offset(this.bb_pos,10);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startGameStateSnapshot(t){t.startObject(4)}static addObjects(t,e){t.addFieldOffset(0,e,0)}static createObjectsVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startObjectsVector(t,e){t.startVector(4,e,4)}static addPublicStatePacked(t,e){t.addFieldOffset(1,e,0)}static createPublicStatePackedVector(t,e){t.startVector(1,e.length,1);for(let s=e.length-1;s>=0;s--)t.addInt8(e[s]);return t.endVector()}static startPublicStatePackedVector(t,e){t.startVector(1,e,1)}static addPrivateStatePacked(t,e){t.addFieldOffset(2,e,0)}static createPrivateStatePackedVector(t,e){t.startVector(1,e.length,1);for(let s=e.length-1;s>=0;s--)t.addInt8(e[s]);return t.endVector()}static startPrivateStatePackedVector(t,e){t.startVector(1,e,1)}static addOwnedObjects(t,e){t.addFieldOffset(3,e,0)}static createOwnedObjectsVector(t,e){t.startVector(2,e.length,2);for(let s=e.length-1;s>=0;s--)t.addInt16(e[s]);return t.endVector()}static startOwnedObjectsVector(t,e){t.startVector(2,e,2)}static endGameStateSnapshot(t){return t.endObject()}static createGameStateSnapshot(t,e,s,i,n){return $.startGameStateSnapshot(t),$.addObjects(t,e),$.addPublicStatePacked(t,s),$.addPrivateStatePacked(t,i),$.addOwnedObjects(t,n),$.endGameStateSnapshot(t)}},Wt=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsConnectionStartMessage(t,e){return(e||new Wt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsConnectionStartMessage(t,e){return t.setPosition(t.position()+4),(e||new Wt).__init(t.readInt32(t.position())+t.position(),t)}sceneName(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}sceneSnapshot(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new $).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startConnectionStartMessage(t){t.startObject(2)}static addSceneName(t,e){t.addFieldOffset(0,e,0)}static addSceneSnapshot(t,e){t.addFieldOffset(1,e,0)}static endConnectionStartMessage(t){let e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}},Pt=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsCreatedObject(t,e){return(e||new Pt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCreatedObject(t,e){return t.setPosition(t.position()+4),(e||new Pt).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint16(this.bb_pos+t):0}name(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startCreatedObject(t){t.startObject(2)}static addId(t,e){t.addFieldInt16(0,e,0)}static addName(t,e){t.addFieldOffset(1,e,0)}static endCreatedObject(t){let e=t.endObject();return t.requiredField(e,6),e}static createCreatedObject(t,e,s){return Pt.startCreatedObject(t),Pt.addId(t,e),Pt.addName(t,s),Pt.endCreatedObject(t)}},N=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsScene(t,e){return(e||new N).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsScene(t,e){return t.setPosition(t.position()+4),(e||new N).__init(t.readInt32(t.position())+t.position(),t)}publicStateDiff(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}publicStateDiffLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}publicStateDiffArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}privateStateDiff(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}privateStateDiffLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}privateStateDiffArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}objects(t,e){let s=this.bb.__offset(this.bb_pos,8);return s?(e||new K).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}objectsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}createdObjects(t,e){let s=this.bb.__offset(this.bb_pos,10);return s?(e||new Pt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}createdObjectsLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}deletedObjects(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+t*2):0}deletedObjectsLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}deletedObjectsArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}newOwnedObjects(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+t*2):0}newOwnedObjectsLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}newOwnedObjectsArray(){let t=this.bb.__offset(this.bb_pos,14);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}oldOwnedObjects(t){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint16(this.bb.__vector(this.bb_pos+e)+t*2):0}oldOwnedObjectsLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}oldOwnedObjectsArray(){let t=this.bb.__offset(this.bb_pos,16);return t?new Uint16Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startScene(t){t.startObject(7)}static addPublicStateDiff(t,e){t.addFieldOffset(0,e,0)}static createPublicStateDiffVector(t,e){t.startVector(1,e.length,1);for(let s=e.length-1;s>=0;s--)t.addInt8(e[s]);return t.endVector()}static startPublicStateDiffVector(t,e){t.startVector(1,e,1)}static addPrivateStateDiff(t,e){t.addFieldOffset(1,e,0)}static createPrivateStateDiffVector(t,e){t.startVector(1,e.length,1);for(let s=e.length-1;s>=0;s--)t.addInt8(e[s]);return t.endVector()}static startPrivateStateDiffVector(t,e){t.startVector(1,e,1)}static addObjects(t,e){t.addFieldOffset(2,e,0)}static createObjectsVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startObjectsVector(t,e){t.startVector(4,e,4)}static addCreatedObjects(t,e){t.addFieldOffset(3,e,0)}static createCreatedObjectsVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startCreatedObjectsVector(t,e){t.startVector(4,e,4)}static addDeletedObjects(t,e){t.addFieldOffset(4,e,0)}static createDeletedObjectsVector(t,e){t.startVector(2,e.length,2);for(let s=e.length-1;s>=0;s--)t.addInt16(e[s]);return t.endVector()}static startDeletedObjectsVector(t,e){t.startVector(2,e,2)}static addNewOwnedObjects(t,e){t.addFieldOffset(5,e,0)}static createNewOwnedObjectsVector(t,e){t.startVector(2,e.length,2);for(let s=e.length-1;s>=0;s--)t.addInt16(e[s]);return t.endVector()}static startNewOwnedObjectsVector(t,e){t.startVector(2,e,2)}static addOldOwnedObjects(t,e){t.addFieldOffset(6,e,0)}static createOldOwnedObjectsVector(t,e){t.startVector(2,e.length,2);for(let s=e.length-1;s>=0;s--)t.addInt16(e[s]);return t.endVector()}static startOldOwnedObjectsVector(t,e){t.startVector(2,e,2)}static endScene(t){return t.endObject()}static createScene(t,e,s,i,n,a,r,o){return N.startScene(t),N.addPublicStateDiff(t,e),N.addPrivateStateDiff(t,s),N.addObjects(t,i),N.addCreatedObjects(t,n),N.addDeletedObjects(t,a),N.addNewOwnedObjects(t,r),N.addOldOwnedObjects(t,o),N.endScene(t)}},Ct=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGameStateUpdateMessage(t,e){return(e||new Ct).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGameStateUpdateMessage(t,e){return t.setPosition(t.position()+4),(e||new Ct).__init(t.readInt32(t.position())+t.position(),t)}scene(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new N).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startGameStateUpdateMessage(t){t.startObject(1)}static addScene(t,e){t.addFieldOffset(0,e,0)}static endGameStateUpdateMessage(t){return t.endObject()}static createGameStateUpdateMessage(t,e){return Ct.startGameStateUpdateMessage(t),Ct.addScene(t,e),Ct.endGameStateUpdateMessage(t)}},ft=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsResumePreviousSceneMessage(t,e){return(e||new ft).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsResumePreviousSceneMessage(t,e){return t.setPosition(t.position()+4),(e||new ft).__init(t.readInt32(t.position())+t.position(),t)}snapshot(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new $).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}name(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startResumePreviousSceneMessage(t){t.startObject(2)}static addSnapshot(t,e){t.addFieldOffset(0,e,0)}static addName(t,e){t.addFieldOffset(1,e,0)}static endResumePreviousSceneMessage(t){return t.endObject()}static createResumePreviousSceneMessage(t,e,s){return ft.startResumePreviousSceneMessage(t),ft.addSnapshot(t,e),ft.addName(t,s),ft.endResumePreviousSceneMessage(t)}},_t=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSceneSwitchMessage(t,e){return(e||new _t).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSceneSwitchMessage(t,e){return t.setPosition(t.position()+4),(e||new _t).__init(t.readInt32(t.position())+t.position(),t)}sceneName(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}isPause(){let t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startSceneSwitchMessage(t){t.startObject(2)}static addSceneName(t,e){t.addFieldOffset(0,e,0)}static addIsPause(t,e){t.addFieldInt8(1,+e,0)}static endSceneSwitchMessage(t){let e=t.endObject();return t.requiredField(e,4),e}static createSceneSwitchMessage(t,e,s){return _t.startSceneSwitchMessage(t),_t.addSceneName(t,e),_t.addIsPause(t,s),_t.endSceneSwitchMessage(t)}},ut=class{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsServerMessage(t,e){return(e||new ut).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsServerMessage(t,e){return t.setPosition(t.position()+4),(e||new ut).__init(t.readInt32(t.position())+t.position(),t)}contentType(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb_pos+t):0}content(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__union(t,this.bb_pos+e):null}static startServerMessage(t){t.startObject(2)}static addContentType(t,e){t.addFieldInt8(0,e,0)}static addContent(t,e){t.addFieldOffset(1,e,0)}static endServerMessage(t){let e=t.endObject();return t.requiredField(e,6),e}static createServerMessage(t,e,s){return ut.startServerMessage(t),ut.addContentType(t,e),ut.addContent(t,s),ut.endServerMessage(t)}},xs;try{xs=new TextDecoder}catch{}var v,bt,h=0,X={},M,Mt,ht=0,wt=0,et,Ut,dt=[],R,ni={useRecords:!1,mapsAsObjects:!0},rn=class{},on=new rn;on.name=\"MessagePack 0xC1\";var oe=!1,ln=2,ai;try{new Function(\"\")}catch{ln=1/0}var ts=class{constructor(t){t&&(t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.sequential&&t.trusted!==!1&&(t.trusted=!0,!t.structures&&t.useRecords!=!1&&(t.structures=[],t.maxSharedStructures||(t.maxSharedStructures=0))),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0),t.int64AsNumber&&(t.int64AsType=\"number\")),Object.assign(this,t)}unpack(t,e){if(v)return fn(()=>(Us(),this?this.unpack(t,e):ts.prototype.unpack.call(ni,t,e)));typeof e==\"object\"?(bt=e.end||t.length,h=e.start||0):(h=0,bt=e>-1?e:t.length),wt=0,Mt=null,et=null,v=t;try{R=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(s){throw v=null,t instanceof Uint8Array?s:new Error(\"Source must be a Uint8Array or Buffer but was a \"+(t&&typeof t==\"object\"?t.constructor.name:typeof t))}if(this instanceof ts){if(X=this,this.structures)return M=this.structures,Ze(e);(!M||M.length>0)&&(M=[])}else X=ni,(!M||M.length>0)&&(M=[]);return Ze(e)}unpackMultiple(t,e){let s,i=0;try{oe=!0;let n=t.length,a=this?this.unpack(t,n):_n.unpack(t,n);if(e){for(e(a);h<n;)if(i=h,e(Ze())===!1)return}else{for(s=[a];h<n;)i=h,s.push(Ze());return s}}catch(n){throw n.lastPosition=i,n.values=s,n}finally{oe=!1,Us()}}_mergeStructures(t,e){t=t||[],Object.isFrozen(t)&&(t=t.map(s=>s.slice(0)));for(let s=0,i=t.length;s<i;s++){let n=t[s];n&&(n.isShared=!0,s>=32&&(n.highByte=s-32>>5))}t.sharedLength=t.length;for(let s in e||[])if(s>=0){let i=t[s],n=e[s];n&&(i&&((t.restoreStructures||(t.restoreStructures=[]))[s]=i),t[s]=n)}return this.structures=t}decode(t,e){return this.unpack(t,e)}};function Ze(t){try{if(!X.trusted&&!oe){let s=M.sharedLength||0;s<M.length&&(M.length=s)}let e;if(X.randomAccessStructure&&v[h]<64&&v[h]>=32&&ai?(e=ai(v,h,bt,X),v=null,!(t&&t.lazy)&&e&&(e=e.toJSON()),h=bt):e=q(),et&&(h=et.postBundlePosition,et=null),h==bt)M&&M.restoreStructures&&ri(),M=null,v=null,Ut&&(Ut=null);else{if(h>bt)throw new Error(\"Unexpected end of MessagePack data\");if(!oe)throw new Error(\"Data read, but end of buffer not reached \"+JSON.stringify(e).slice(0,100))}return e}catch(e){throw M&&M.restoreStructures&&ri(),Us(),(e instanceof RangeError||e.message.startsWith(\"Unexpected end of buffer\")||h>bt)&&(e.incomplete=!0),e}}function ri(){for(let t in M.restoreStructures)M[t]=M.restoreStructures[t];M.restoreStructures=null}function q(){let t=v[h++];if(t<160)if(t<128){if(t<64)return t;{let e=M[t&63]||X.getStructures&&dn()[t&63];return e?(e.read||(e.read=Hs(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,X.mapsAsObjects){let e={};for(let s=0;s<t;s++){let i=bn();i===\"__proto__\"&&(i=\"__proto_\"),e[i]=q()}return e}else{let e=new Map;for(let s=0;s<t;s++)e.set(q(),q());return e}else{t-=144;let e=new Array(t);for(let s=0;s<t;s++)e[s]=q();return X.freezeData?Object.freeze(e):e}else if(t<192){let e=t-160;if(wt>=h)return Mt.slice(h-ht,(h+=e)-ht);if(wt==0&&bt<140){let s=e<16?Gs(e):hn(e);if(s!=null)return s}return Cs(e)}else{let e;switch(t){case 192:return null;case 193:return et?(e=q(),e>0?et[1].slice(et.position1,et.position1+=e):et[0].slice(et.position0,et.position0-=e)):on;case 194:return!1;case 195:return!0;case 196:if(e=v[h++],e===void 0)throw new Error(\"Unexpected end of buffer\");return hs(e);case 197:return e=R.getUint16(h),h+=2,hs(e);case 198:return e=R.getUint32(h),h+=4,hs(e);case 199:return Xt(v[h++]);case 200:return e=R.getUint16(h),h+=2,Xt(e);case 201:return e=R.getUint32(h),h+=4,Xt(e);case 202:if(e=R.getFloat32(h),X.useFloat32>2){let s=Ys[(v[h]&127)<<1|v[h+1]>>7];return h+=4,(s*e+(e>0?.5:-.5)>>0)/s}return h+=4,e;case 203:return e=R.getFloat64(h),h+=8,e;case 204:return v[h++];case 205:return e=R.getUint16(h),h+=2,e;case 206:return e=R.getUint32(h),h+=4,e;case 207:return X.int64AsType===\"number\"?(e=R.getUint32(h)*4294967296,e+=R.getUint32(h+4)):X.int64AsType===\"string\"?e=R.getBigUint64(h).toString():e=R.getBigUint64(h),h+=8,e;case 208:return R.getInt8(h++);case 209:return e=R.getInt16(h),h+=2,e;case 210:return e=R.getInt32(h),h+=4,e;case 211:return X.int64AsType===\"number\"?(e=R.getInt32(h)*4294967296,e+=R.getUint32(h+4)):X.int64AsType===\"string\"?e=R.getBigInt64(h).toString():e=R.getBigInt64(h),h+=8,e;case 212:if(e=v[h++],e==114)return ci(v[h++]&63);{let s=dt[e];if(s)return s.read?(h++,s.read(q())):s.noBuffer?(h++,s()):s(v.subarray(h,++h));throw new Error(\"Unknown extension \"+e)}case 213:return e=v[h],e==114?(h++,ci(v[h++]&63,v[h++])):Xt(2);case 214:return Xt(4);case 215:return Xt(8);case 216:return Xt(16);case 217:return e=v[h++],wt>=h?Mt.slice(h-ht,(h+=e)-ht):Pa(e);case 218:return e=R.getUint16(h),h+=2,wt>=h?Mt.slice(h-ht,(h+=e)-ht):Fa(e);case 219:return e=R.getUint32(h),h+=4,wt>=h?Mt.slice(h-ht,(h+=e)-ht):Ra(e);case 220:return e=R.getUint16(h),h+=2,li(e);case 221:return e=R.getUint32(h),h+=4,li(e);case 222:return e=R.getUint16(h),h+=2,di(e);case 223:return e=R.getUint32(h),h+=4,di(e);default:if(t>=224)return t-256;if(t===void 0){let s=new Error(\"Unexpected end of MessagePack data\");throw s.incomplete=!0,s}throw new Error(\"Unknown MessagePack token \"+t)}}}var za=/^[a-zA-Z_$][a-zA-Z\\d_$]*$/;function Hs(t,e){function s(){if(s.count++>ln){let n=t.read=new Function(\"r\",\"return function(){return \"+(X.freezeData?\"Object.freeze\":\"\")+\"({\"+t.map(a=>a===\"__proto__\"?\"__proto_:r()\":za.test(a)?a+\":r()\":\"[\"+JSON.stringify(a)+\"]:r()\").join(\",\")+\"})}\")(q);return t.highByte===0&&(t.read=oi(e,t.read)),n()}let i={};for(let n=0,a=t.length;n<a;n++){let r=t[n];r===\"__proto__\"&&(r=\"__proto_\"),i[r]=q()}return X.freezeData?Object.freeze(i):i}return s.count=0,t.highByte===0?oi(e,s):s}var oi=(t,e)=>function(){let s=v[h++];if(s===0)return e();let i=t<32?-(t+(s<<5)):t+(s<<5),n=M[i]||dn()[i];if(!n)throw new Error(\"Record id is not defined for \"+i);return n.read||(n.read=Hs(n,t)),n.read()};function dn(){let t=fn(()=>(v=null,X.getStructures()));return M=X._mergeStructures(t,M)}var Cs=Fe,Pa=Fe,Fa=Fe,Ra=Fe;function Fe(t){let e;if(t<16&&(e=Gs(t)))return e;if(t>64&&xs)return xs.decode(v.subarray(h,h+=t));let s=h+t,i=[];for(e=\"\";h<s;){let n=v[h++];if((n&128)===0)i.push(n);else if((n&224)===192){let a=v[h++]&63;i.push((n&31)<<6|a)}else if((n&240)===224){let a=v[h++]&63,r=v[h++]&63;i.push((n&31)<<12|a<<6|r)}else if((n&248)===240){let a=v[h++]&63,r=v[h++]&63,o=v[h++]&63,c=(n&7)<<18|a<<12|r<<6|o;c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|c&1023),i.push(c)}else i.push(n);i.length>=4096&&(e+=J.apply(String,i),i.length=0)}return i.length>0&&(e+=J.apply(String,i)),e}function li(t){let e=new Array(t);for(let s=0;s<t;s++)e[s]=q();return X.freezeData?Object.freeze(e):e}function di(t){if(X.mapsAsObjects){let e={};for(let s=0;s<t;s++){let i=bn();i===\"__proto__\"&&(i=\"__proto_\"),e[i]=q()}return e}else{let e=new Map;for(let s=0;s<t;s++)e.set(q(),q());return e}}var J=String.fromCharCode;function hn(t){let e=h,s=new Array(t);for(let i=0;i<t;i++){let n=v[h++];if((n&128)>0){h=e;return}s[i]=n}return J.apply(String,s)}function Gs(t){if(t<4)if(t<2){if(t===0)return\"\";{let e=v[h++];if((e&128)>1){h-=1;return}return J(e)}}else{let e=v[h++],s=v[h++];if((e&128)>0||(s&128)>0){h-=2;return}if(t<3)return J(e,s);let i=v[h++];if((i&128)>0){h-=3;return}return J(e,s,i)}else{let e=v[h++],s=v[h++],i=v[h++],n=v[h++];if((e&128)>0||(s&128)>0||(i&128)>0||(n&128)>0){h-=4;return}if(t<6){if(t===4)return J(e,s,i,n);{let a=v[h++];if((a&128)>0){h-=5;return}return J(e,s,i,n,a)}}else if(t<8){let a=v[h++],r=v[h++];if((a&128)>0||(r&128)>0){h-=6;return}if(t<7)return J(e,s,i,n,a,r);let o=v[h++];if((o&128)>0){h-=7;return}return J(e,s,i,n,a,r,o)}else{let a=v[h++],r=v[h++],o=v[h++],c=v[h++];if((a&128)>0||(r&128)>0||(o&128)>0||(c&128)>0){h-=8;return}if(t<10){if(t===8)return J(e,s,i,n,a,r,o,c);{let l=v[h++];if((l&128)>0){h-=9;return}return J(e,s,i,n,a,r,o,c,l)}}else if(t<12){let l=v[h++],d=v[h++];if((l&128)>0||(d&128)>0){h-=10;return}if(t<11)return J(e,s,i,n,a,r,o,c,l,d);let O=v[h++];if((O&128)>0){h-=11;return}return J(e,s,i,n,a,r,o,c,l,d,O)}else{let l=v[h++],d=v[h++],O=v[h++],g=v[h++];if((l&128)>0||(d&128)>0||(O&128)>0||(g&128)>0){h-=12;return}if(t<14){if(t===12)return J(e,s,i,n,a,r,o,c,l,d,O,g);{let u=v[h++];if((u&128)>0){h-=13;return}return J(e,s,i,n,a,r,o,c,l,d,O,g,u)}}else{let u=v[h++],U=v[h++];if((u&128)>0||(U&128)>0){h-=14;return}if(t<15)return J(e,s,i,n,a,r,o,c,l,d,O,g,u,U);let z=v[h++];if((z&128)>0){h-=15;return}return J(e,s,i,n,a,r,o,c,l,d,O,g,u,U,z)}}}}}function hi(){let t=v[h++],e;if(t<192)e=t-160;else switch(t){case 217:e=v[h++];break;case 218:e=R.getUint16(h),h+=2;break;case 219:e=R.getUint32(h),h+=4;break;default:throw new Error(\"Expected string\")}return Fe(e)}function hs(t){return X.copyBuffers?Uint8Array.prototype.slice.call(v,h,h+=t):v.subarray(h,h+=t)}function Xt(t){let e=v[h++];if(dt[e]){let s;return dt[e](v.subarray(h,s=h+=t),i=>{h=i;try{return q()}finally{h=s}})}else throw new Error(\"Unknown extension type \"+e)}var bi=new Array(4096);function bn(){let t=v[h++];if(t>=160&&t<192){if(t=t-160,wt>=h)return Mt.slice(h-ht,(h+=t)-ht);if(!(wt==0&&bt<180))return Cs(t)}else return h--,q().toString();let e=(t<<5^(t>1?R.getUint16(h):t>0?v[h]:0))&4095,s=bi[e],i=h,n=h+t-3,a,r=0;if(s&&s.bytes==t){for(;i<n;){if(a=R.getUint32(i),a!=s[r++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(a=v[i++],a!=s[r++]){i=1879048192;break}if(i===n)return h=i,s.string;n-=3,i=h}for(s=[],bi[e]=s,s.bytes=t;i<n;)a=R.getUint32(i),s.push(a),i+=4;for(n+=3;i<n;)a=v[i++],s.push(a);let o=t<16?Gs(t):hn(t);return o!=null?s.string=o:s.string=Cs(t)}var ci=(t,e)=>{let s=q().map(a=>a.toString()),i=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,s.highByte=e);let n=M[t];return n&&n.isShared&&((M.restoreStructures||(M.restoreStructures=[]))[t]=n),M[t]=s,s.read=Hs(s,i),s.read()};dt[0]=()=>{};dt[0].noBuffer=!0;dt[101]=()=>{let t=q();return(globalThis[t[0]]||Error)(t[1])};dt[105]=t=>{let e=R.getUint32(h-4);Ut||(Ut=new Map);let s=v[h],i;s>=144&&s<160||s==220||s==221?i=[]:i={};let n={target:i};Ut.set(e,n);let a=q();return n.used?Object.assign(i,a):(n.target=a,a)};dt[112]=t=>{let e=R.getUint32(h-4),s=Ut.get(e);return s.used=!0,s.target};dt[115]=()=>new Set(q());var cn=[\"Int8\",\"Uint8\",\"Uint8Clamped\",\"Int16\",\"Uint16\",\"Int32\",\"Uint32\",\"Float32\",\"Float64\",\"BigInt64\",\"BigUint64\"].map(t=>t+\"Array\");dt[116]=t=>{let e=t[0],s=cn[e];if(!s)throw new Error(\"Could not find typed array for code \"+e);return new globalThis[s](Uint8Array.prototype.slice.call(t,1).buffer)};dt[120]=()=>{let t=q();return new RegExp(t[0],t[1])};var Ma=[];dt[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],s=h;return h+=e-t.length,et=Ma,et=[hi(),hi()],et.position0=0,et.position1=0,et.postBundlePosition=h,h=s,q()};dt[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date(\"invalid\");function fn(t){let e=bt,s=h,i=ht,n=wt,a=Mt,r=Ut,o=et,c=new Uint8Array(v.slice(0,bt)),l=M,d=M.slice(0,M.length),O=X,g=oe,u=t();return bt=e,h=s,ht=i,wt=n,Mt=a,Ut=r,et=o,v=c,oe=g,M=l,M.splice(0,M.length,...d),X=O,R=new DataView(v.buffer,v.byteOffset,v.byteLength),u}function Us(){v=null,Ut=null,M=null}var Ys=new Array(147);for(let t=0;t<256;t++)Ys[t]=+(\"1e\"+Math.floor(45.15-t*.30103));var _n=new ts({useRecords:!1}),Ea=_n.unpack,qe;try{qe=new TextEncoder}catch{}var Vs,un,ns=typeof Buffer<\"u\",He=ns?function(t){return Buffer.allocUnsafeSlow(t)}:Uint8Array,pn=ns?Buffer:Uint8Array,fi=ns?4294967296:2144337920,_,pe,Z,b=0,it,Y=null,Ba,Na=61440,La=/[\\u0080-\\uFFFF]/,se=Symbol(\"record-id\"),Za=class extends ts{constructor(t){super(t),this.offset=0;let e,s,i,n,a=pn.prototype.utf8Write?function(f,y){return _.utf8Write(f,y,4294967295)}:qe&&qe.encodeInto?function(f,y){return qe.encodeInto(f,_.subarray(y)).written}:!1,r=this;t||(t={});let o=t&&t.sequential,c=t.structures||t.saveStructures,l=t.maxSharedStructures;if(l==null&&(l=c?32:0),l>8160)throw new Error(\"Maximum maxSharedStructure is 8160\");t.structuredClone&&t.moreTypes==null&&(t.moreTypes=!0);let d=t.maxOwnStructures;d==null&&(d=c?32:64),!this.structures&&t.useRecords!=!1&&(this.structures=[]);let O=l>32||d+l>64,g=l+64,u=l+d+64;if(u>8256)throw new Error(\"Maximum maxSharedStructure + maxOwnStructure is 8192\");let U=[],z=0,x=0;this.pack=this.encode=function(f,y){if(_||(_=new He(8192),Z=_.dataView||(_.dataView=new DataView(_.buffer,0,8192)),b=0),it=_.length-10,it-b<2048?(_=new He(_.length),Z=_.dataView||(_.dataView=new DataView(_.buffer,0,_.length)),it=_.length-10,b=0):b=b+7&2147483640,e=b,n=r.structuredClone?new Map:null,r.bundleStrings&&typeof f!=\"string\"?(Y=[],Y.size=1/0):Y=null,i=r.structures,i){i.uninitialized&&(i=r._mergeStructures(r.getStructures()));let p=i.sharedLength||0;if(p>l)throw new Error(\"Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to \"+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let w=0;w<p;w++){let S=i[w];if(!S)continue;let D,V=i.transitions;for(let A=0,W=S.length;A<W;A++){let L=S[A];D=V[L],D||(D=V[L]=Object.create(null)),V=D}V[se]=w+64}this.lastNamedStructuresLength=p}o||(i.nextId=p+64)}s&&(s=!1);try{r.randomAccessStructure&&f.constructor&&f.constructor===Object?T(f):k(f);let p=Y;if(Y&&pi(e,k,0),n&&n.idsToInsert){let w=n.idsToInsert.sort((A,W)=>A.offset>W.offset?1:-1),S=w.length,D=-1;for(;p&&S>0;){let A=w[--S].offset+e;A<p.stringsPosition+e&&D===-1&&(D=0),A>p.position+e?D>=0&&(D+=6):(D>=0&&(Z.setUint32(p.position+e,Z.getUint32(p.position+e)+D),D=-1),p=p.previous,S++)}D>=0&&p&&Z.setUint32(p.position+e,Z.getUint32(p.position+e)+D),b+=w.length*6,b>it&&j(b),r.offset=b;let V=Ga(_.subarray(e,b),w);return n=null,V}return r.offset=b,y&Ka?(_.start=e,_.end=b,_):_.subarray(e,b)}finally{if(i){x<10&&x++;let p=i.sharedLength||0;if(i.length>p&&(i.length=p),z>1e4)i.transitions=null,x=0,z=0,U.length>0&&(U=[]);else if(U.length>0&&!o){for(let w=0,S=U.length;w<S;w++)U[w][se]=0;U=[]}if(s&&r.saveStructures){let w=_.subarray(e,b),S=Ya(i,r);return r.saveStructures(S,S.isCompatible)===!1?r.pack(f):(r.lastNamedStructuresLength=p,w)}}y&qa&&(b=e)}};let I=f=>{var y=f.length;y<16?_[b++]=144|y:y<65536?(_[b++]=220,_[b++]=y>>8,_[b++]=y&255):(_[b++]=221,Z.setUint32(b,y),b+=4);for(let p=0;p<y;p++)k(f[p])},k=f=>{b>it&&(_=j(b));var y=typeof f,p;if(y===\"string\"){let w=f.length;if(Y&&w>=4&&w<4096){if((Y.size+=w)>Na){let A,W=(Y[0]?Y[0].length*3+Y[1].length:0)+10;b+W>it&&(_=j(b+W));let L;Y.position?(L=Y,_[b]=200,b+=3,_[b++]=98,A=b-e,b+=4,pi(e,k,0),Z.setUint16(A+e-3,b-e-A)):(_[b++]=214,_[b++]=98,A=b-e,b+=4),Y=[\"\",\"\"],Y.previous=L,Y.size=0,Y.position=A}let V=La.test(f);Y[V?0:1]+=f,_[b++]=193,k(V?-w:w);return}let S;w<32?S=1:w<256?S=2:w<65536?S=3:S=5;let D=w*3;if(b+D>it&&(_=j(b+D)),w<64||!a){let V,A,W,L=b+S;for(V=0;V<w;V++)A=f.charCodeAt(V),A<128?_[L++]=A:A<2048?(_[L++]=A>>6|192,_[L++]=A&63|128):(A&64512)===55296&&((W=f.charCodeAt(V+1))&64512)===56320?(A=65536+((A&1023)<<10)+(W&1023),V++,_[L++]=A>>18|240,_[L++]=A>>12&63|128,_[L++]=A>>6&63|128,_[L++]=A&63|128):(_[L++]=A>>12|224,_[L++]=A>>6&63|128,_[L++]=A&63|128);p=L-b-S}else p=a(f,b+S);p<32?_[b++]=160|p:p<256?(S<2&&_.copyWithin(b+2,b+1,b+1+p),_[b++]=217,_[b++]=p):p<65536?(S<3&&_.copyWithin(b+3,b+2,b+2+p),_[b++]=218,_[b++]=p>>8,_[b++]=p&255):(S<5&&_.copyWithin(b+5,b+3,b+3+p),_[b++]=219,Z.setUint32(b,p),b+=4),b+=p}else if(y===\"number\")if(f>>>0===f)f<32||f<128&&this.useRecords===!1||f<64&&!this.randomAccessStructure?_[b++]=f:f<256?(_[b++]=204,_[b++]=f):f<65536?(_[b++]=205,_[b++]=f>>8,_[b++]=f&255):(_[b++]=206,Z.setUint32(b,f),b+=4);else if(f>>0===f)f>=-32?_[b++]=256+f:f>=-128?(_[b++]=208,_[b++]=f+256):f>=-32768?(_[b++]=209,Z.setInt16(b,f),b+=2):(_[b++]=210,Z.setInt32(b,f),b+=4);else{let w;if((w=this.useFloat32)>0&&f<4294967296&&f>=-2147483648){_[b++]=202,Z.setFloat32(b,f);let S;if(w<4||(S=f*Ys[(_[b]&127)<<1|_[b+1]>>7])>>0===S){b+=4;return}else b--}_[b++]=203,Z.setFloat64(b,f),b+=8}else if(y===\"object\")if(!f)_[b++]=192;else{if(n){let S=n.get(f);if(S){if(!S.id){let D=n.idsToInsert||(n.idsToInsert=[]);S.id=D.push(S)}_[b++]=214,_[b++]=112,Z.setUint32(b,S.id),b+=4;return}else n.set(f,{offset:b-e})}let w=f.constructor;if(w===Object)m(f,!0);else if(w===Array)I(f);else if(w===Map){p=f.size,p<16?_[b++]=128|p:p<65536?(_[b++]=222,_[b++]=p>>8,_[b++]=p&255):(_[b++]=223,Z.setUint32(b,p),b+=4);for(let[S,D]of f)k(S),k(D)}else{for(let S=0,D=Vs.length;S<D;S++){let V=un[S];if(f instanceof V){let A=Vs[S];if(A.write){A.type&&(_[b++]=212,_[b++]=A.type,_[b++]=0);let Tt=A.write.call(this,f);Tt===f?Array.isArray(f)?I(f):m(f):k(Tt);return}let W=_,L=Z,Ot=b;_=null;let Yt;try{Yt=A.pack.call(this,f,Tt=>(_=W,W=null,b+=Tt,b>it&&j(b),{target:_,targetView:Z,position:b-Tt}),k)}finally{W&&(_=W,Z=L,b=Ot,it=_.length-10)}Yt&&(Yt.length+b>it&&j(Yt.length+b),b=Ha(Yt,_,b,A.type));return}}Array.isArray(f)?I(f):m(f,!f.hasOwnProperty)}}else if(y===\"boolean\")_[b++]=f?195:194;else if(y===\"bigint\"){if(f<BigInt(1)<<BigInt(63)&&f>=-(BigInt(1)<<BigInt(63)))_[b++]=211,Z.setBigInt64(b,f);else if(f<BigInt(1)<<BigInt(64)&&f>0)_[b++]=207,Z.setBigUint64(b,f);else if(this.largeBigIntToFloat)_[b++]=203,Z.setFloat64(b,Number(f));else throw new RangeError(f+\" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64\");b+=8}else if(y===\"undefined\")this.encodeUndefinedAsNil?_[b++]=192:(_[b++]=212,_[b++]=0,_[b++]=0);else if(y===\"function\")k(this.writeFunction&&this.writeFunction());else throw new Error(\"Unknown type: \"+y)},m=this.useRecords===!1?this.variableMapSize?f=>{let y=Object.keys(f),p=y.length;p<16?_[b++]=128|p:p<65536?(_[b++]=222,_[b++]=p>>8,_[b++]=p&255):(_[b++]=223,Z.setUint32(b,p),b+=4);let w;for(let S=0;S<p;S++)k(w=y[S]),k(f[w])}:(f,y)=>{_[b++]=222;let p=b-e;b+=2;let w=0;for(let S in f)(y||f.hasOwnProperty(S))&&(k(S),k(f[S]),w++);_[p+++e]=w>>8,_[p+e]=w&255}:t.progressiveRecords&&!O?(f,y)=>{let p,w=i.transitions||(i.transitions=Object.create(null)),S=b++-e,D;for(let V in f)if(y||f.hasOwnProperty(V)){if(p=w[V],p)w=p;else{let A=Object.keys(f),W=w;w=i.transitions;let L=0;for(let Ot=0,Yt=A.length;Ot<Yt;Ot++){let Tt=A[Ot];p=w[Tt],p||(p=w[Tt]=Object.create(null),L++),w=p}S+e+1==b?(b--,G(w,A,L)):P(w,A,S,L),D=!0,w=W[V]}k(f[V])}if(!D){let V=w[se];V?_[S+e]=V:P(w,Object.keys(f),S,0)}}:(f,y)=>{let p,w=i.transitions||(i.transitions=Object.create(null)),S=0;for(let V in f)(y||f.hasOwnProperty(V))&&(p=w[V],p||(p=w[V]=Object.create(null),S++),w=p);let D=w[se];D?D>=96&&O?(_[b++]=((D-=96)&31)+96,_[b++]=D>>5):_[b++]=D:G(w,w.__keys__||Object.keys(f),S);for(let V in f)(y||f.hasOwnProperty(V))&&k(f[V])},j=f=>{let y;if(f>16777216){if(f-e>fi)throw new Error(\"Packed buffer would be larger than maximum buffer size\");y=Math.min(fi,Math.round(Math.max((f-e)*(f>67108864?1.25:2),4194304)/4096)*4096)}else y=(Math.max(f-e<<2,_.length-1)>>12)+1<<12;let p=new He(y);return Z=p.dataView||(p.dataView=new DataView(p.buffer,0,y)),f=Math.min(f,_.length),_.copy?_.copy(p,0,e,f):p.set(_.slice(e,f)),b-=e,e=0,it=p.length-10,_=p},G=(f,y,p)=>{let w=i.nextId;w||(w=64),w<g&&this.shouldShareStructure&&!this.shouldShareStructure(y)?(w=i.nextOwnId,w<u||(w=g),i.nextOwnId=w+1):(w>=u&&(w=g),i.nextId=w+1);let S=y.highByte=w>=96&&O?w-96>>5:-1;f[se]=w,f.__keys__=y,i[w-64]=y,w<g?(y.isShared=!0,i.sharedLength=w-63,s=!0,S>=0?(_[b++]=(w&31)+96,_[b++]=S):_[b++]=w):(S>=0?(_[b++]=213,_[b++]=114,_[b++]=(w&31)+96,_[b++]=S):(_[b++]=212,_[b++]=114,_[b++]=w),p&&(z+=x*p),U.length>=d&&(U.shift()[se]=0),U.push(f),k(y))},P=(f,y,p,w)=>{let S=_,D=b,V=it,A=e;_=pe,b=0,e=0,_||(pe=_=new He(8192)),it=_.length-10,G(f,y,w),pe=_;let W=b;if(_=S,b=D,it=V,e=A,W>1){let L=b+W-1;L>it&&j(L);let Ot=p+e;_.copyWithin(Ot+W,Ot+1,b),_.set(pe.slice(0,W),Ot),b=L}else _[p+e]=pe[0]},T=(f,y)=>{let p=Ba(f,_,b,i,j,(w,S,D)=>{if(D)return s=!0;if(b=S,e>0){if(k(w),e==0)return{position:b,targetView:Z,target:_}}else k(w);return b},this);if(p===0)return m(f,!0);b=p}}useBuffer(t){_=t,Z=new DataView(_.buffer,_.byteOffset,_.byteLength),b=0}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}};un=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,rn];Vs=[{pack(t,e,s){let i=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:a,position:r}=e(6);n[r++]=214,n[r++]=255,a.setUint32(r,i)}else if(i>0&&i<4294967296){let{target:n,targetView:a,position:r}=e(10);n[r++]=215,n[r++]=255,a.setUint32(r,t.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),a.setUint32(r+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return e(0),s(this.onInvalidDate());let{target:n,targetView:a,position:r}=e(3);n[r++]=212,n[r++]=255,n[r++]=255}else{let{target:n,targetView:a,position:r}=e(15);n[r++]=199,n[r++]=12,n[r++]=255,a.setUint32(r,t.getMilliseconds()*1e6),a.setBigInt64(r+4,BigInt(Math.floor(i)))}}},{pack(t,e,s){let i=Array.from(t),{target:n,position:a}=e(this.moreTypes?3:0);this.moreTypes&&(n[a++]=212,n[a++]=115,n[a++]=0),s(i)}},{pack(t,e,s){let{target:i,position:n}=e(this.moreTypes?3:0);this.moreTypes&&(i[n++]=212,i[n++]=101,i[n++]=0),s([t.name,t.message])}},{pack(t,e,s){let{target:i,position:n}=e(this.moreTypes?3:0);this.moreTypes&&(i[n++]=212,i[n++]=120,i[n++]=0),s([t.source,t.flags])}},{pack(t,e){this.moreTypes?_i(t,16,e):ui(ns?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let s=t.constructor;s!==pn&&this.moreTypes?_i(t,cn.indexOf(s.name),e):ui(t,e)}},{pack(t,e){let{target:s,position:i}=e(1);s[i]=193}}];function _i(t,e,s,i){let n=t.byteLength;if(n+1<256){var{target:a,position:r}=s(4+n);a[r++]=199,a[r++]=n+1}else if(n+1<65536){var{target:a,position:r}=s(5+n);a[r++]=200,a[r++]=n+1>>8,a[r++]=n+1&255}else{var{target:a,position:r,targetView:o}=s(7+n);a[r++]=201,o.setUint32(r,n+1),r+=4}a[r++]=116,a[r++]=e,a.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r)}function ui(t,e){let s=t.byteLength;var i,n;if(s<256){var{target:i,position:n}=e(s+2);i[n++]=196,i[n++]=s}else if(s<65536){var{target:i,position:n}=e(s+3);i[n++]=197,i[n++]=s>>8,i[n++]=s&255}else{var{target:i,position:n,targetView:a}=e(s+5);i[n++]=198,a.setUint32(n,s),n+=4}i.set(t,n)}function Ha(t,e,s,i){let n=t.length;switch(n){case 1:e[s++]=212;break;case 2:e[s++]=213;break;case 4:e[s++]=214;break;case 8:e[s++]=215;break;case 16:e[s++]=216;break;default:n<256?(e[s++]=199,e[s++]=n):n<65536?(e[s++]=200,e[s++]=n>>8,e[s++]=n&255):(e[s++]=201,e[s++]=n>>24,e[s++]=n>>16&255,e[s++]=n>>8&255,e[s++]=n&255)}return e[s++]=i,e.set(t,s),s+=n,s}function Ga(t,e){let s,i=e.length*6,n=t.length-i;for(;s=e.pop();){let a=s.offset,r=s.id;t.copyWithin(a+i,a,n),i-=6;let o=a+i;t[o++]=214,t[o++]=105,t[o++]=r>>24,t[o++]=r>>16&255,t[o++]=r>>8&255,t[o++]=r&255,n=a}return t}function pi(t,e,s){if(Y.length>0){Z.setUint32(Y.position+t,b+s-Y.position-t),Y.stringsPosition=b-t;let i=Y;Y=null,e(i[0]),e(i[1])}}function Ya(t,e){return t.isCompatible=s=>{let i=!s||(e.lastNamedStructuresLength||0)===s.length;return i||e._mergeStructures(s),i},t}var Xa=new Za({useRecords:!1}),Wa=Xa.pack,Ka=512,qa=1024,ke=t=>Wa(t.toJSObject()),je=(t,e)=>t.fromJSObject(Ea(e)),gn={};be(gn,{_getAllIDsOfObjectsOfPlayer:()=>kn,_getNewPlayerObjects:()=>vn,_getOldPlayerObjects:()=>Sn,changeObjectOwnerToPickedPlayer:()=>Ja,onObjectCreated:()=>$a,onPlayerConnection:()=>mn,onPlayerDisconnection:()=>On,pickObjectsOfPlayer:()=>er,pickPlayerOfObject:()=>tr});var wn={};be(wn,{getCurrentPlayerID:()=>Re,setPickedPlayer:()=>Ae});var yn=\"\",Re=()=>yn,Ae=t=>{yn=t},$e={},Qe={};gdjs.registerFirstRuntimeSceneLoadedCallback(t=>{let{layouts:e,objects:s}=t.getGame().getGameData();for(let i of e){$e[i.name]=new Map,Qe[i.name]=new Set;for(let n of i.objects){let a=n.behaviors.find(r=>r.type===\"THNK::Player\");!a||(a.CreateOnConnect&&$e[i.name].set(n.name,[a.CreateOnConnectX,a.CreateOnConnectY]),a.DeleteOnDisconnect&&Qe[i.name].add(n.name))}}for(let i of s){let n=i.behaviors.find(a=>a.type===\"THNK::Player\");if(n&&n.CreateOnConnect)for(let a of Object.values($e))a.set(i.name,[n.CreateOnConnectX,n.CreateOnConnectY]);if(n&&n.DeleteOnDisconnect)for(let a of Object.values(Qe))a.add(i.name)}});var mn=t=>{for(let[e,[s,i]]of $e[t.getName()])t.createObject(e).setPosition(s,i)},Vt=new Map,Bt=new Map,Ht=new Map,mt=new Map,Ie=new Map,vn=()=>{let t=mt;return mt=new Map,t},Sn=()=>{let t=Ie;return Ie=new Map,t},$a=t=>{let e=Re(),s=Vt.get(e);s||Vt.set(e,s=new gdjs.LongLivedObjectsList);let i=mt.get(e);i||mt.set(e,i=new Set);let n=Bt.get(e);n||Bt.set(e,n=new Set),s.addObject(t.getName(),t),setTimeout(()=>{console.log(t.thnkID),i.add(t.thnkID),n.add(t.thnkID),Ht.set(t.thnkID,e)},10),t.registerDestroyCallback(()=>Qa(t))},Qa=t=>{let e=Re(),s=Vt.get(e),i=mt.get(e),n=Ie.get(e),a=Bt.get(e);s&&s.removeObject(t.getName(),t),i&&i.delete(t.thnkID),n&&n.delete(t.thnkID),a&&a.delete(t.thnkID),Ht.delete(t.thnkID)},On=(t,e)=>{let s=Vt.get(e);if(s){for(let i of Qe[t.getName()])for(let n of s.getObjects(i))n.deleteFromScene(t);Vt.delete(e),mt.delete(e),Ie.delete(e),Bt.delete(e);for(let[i,n]of Ht)n===e&&Ht.delete(i)}},Ja=t=>{let e=Re(),s=Ht.get(t.thnkID);if(e===s)return;let i=Vt.get(e);i||Vt.set(e,i=new gdjs.LongLivedObjectsList);let n=mt.get(e);n||mt.set(e,n=new Set);let a=Bt.get(e);a||Bt.set(e,a=new Set);let r=mt.get(s);r||Ie.set(s,r=new Set);let o=Bt.get(s),c=mt.get(s);Vt.get(s)?.removeObject(t.getName(),t),i.addObject(t.getName(),t),n.add(t.thnkID),a.add(t.thnkID),r.add(t.thnkID),o&&o.delete(t.thnkID),c&&c.delete(t.thnkID),Ht.set(t.thnkID,e)},tr=t=>{Ht.has(t.thnkID)&&Ae(Ht.get(t.thnkID))},er=t=>{let e=Vt.get(Re());if(!e){for(let i of Object.values(t.items))i.length=0;return!1}let s=!1;for(let[i,n]of Object.entries(t.items)){let a=e.getObjects(i);a.length&&(gdjs.copyArray(a,n),s=!0)}return s},kn=t=>{let e=Bt.get(t);return e&&e.size>0?Array.from(e.values()):null},jn=(t,e,s)=>{if(!e.thnkServer)return-1;let{stateVariables:i,objectsRegistery:n}=e.thnkServer,{publicStateVariable:a,privateStateVariable:r}=i,o=a.getChildrenCount()!==0?$.createPublicStatePackedVector(t,ke(a)):null,c=r.getChild(s),l=c.getChildrenCount()!==0?$.createPrivateStatePackedVector(t,ke(c)):null,d=n.createObjectsSnapshot(t,s),O=d.length?$.createObjectsVector(t,d):null,g=kn(s),u=g?$.createOwnedObjectsVector(t,g):null;return $.startGameStateSnapshot(t),o&&$.addPublicStatePacked(t,o),l&&$.addPrivateStatePacked(t,l),O&&$.addObjects(t,O),u&&$.addOwnedObjects(t,u),$.endGameStateSnapshot(t)},sr=(t,e,s)=>{let i=new Gt(512),n=i.createString(s.getName()),a=jn(i,s,t);Wt.startConnectionStartMessage(i),Wt.addSceneName(i,n),Wt.addSceneSnapshot(i,a),e.sendServerMessageTo(t,i,ut.createServerMessage(i,1,Wt.endConnectionStartMessage(i)))},ir=(t,e,s)=>{let i=new Gt(256),n=s.serialize(i,t);if(!n)return;Ct.startGameStateUpdateMessage(i),Ct.addScene(i,n);let a=Ct.endGameStateUpdateMessage(i);e.sendServerMessageTo(t,i,ut.createServerMessage(i,2,a))},nr=(t,e,s)=>{let i=new Gt(512),n=i.createString(e);_t.startSceneSwitchMessage(i),_t.addSceneName(i,n),_t.addIsPause(i,s),t.sendServerMessageToAll(i,ut.createServerMessage(i,3,_t.endSceneSwitchMessage(i)))},bs=(t,e,s)=>{for(let i of t){let n=new Gt(512),a=s?n.createString(s.getName()):null,r=s?jn(n,s,i):null;ft.startResumePreviousSceneMessage(n),r&&a&&(ft.addSnapshot(n,r),ft.addName(n,a));let o=ut.createServerMessage(n,4,ft.endResumePreviousSceneMessage(n));e.sendServerMessageTo(i,n,o)}},gi=new Map,Xs=t=>{let e=gi.get(t);return e||gi.set(t,e=[]),e},ar=(t,e,s)=>{Xs(e).push({initiatorUserID:t,serializedExtraData:s})},rr=(t,e,s)=>{Xs(e).push({initiatorUserID:t,extraData:s})},or=(t,e)=>{let s=Xs(t);if(s.length){let i=s.shift();return Ae(i.initiatorUserID),i.serializedExtraData?je(e,i.serializedExtraData):i.extraData&&gdjs.Variable.copy(i.extraData,e),!0}return!1},lr=t=>!!t.thnkServer?.playerManager.popConnection(),dr=t=>!!t.thnkServer?.playerManager.popDisconnection(),An={};be(An,{getTickRate:()=>Ws,isDedicated:()=>Cn,setDedicated:()=>hr,setTickRate:()=>br});var In=!1,xn=120,hr=()=>{In=!0},br=t=>{xn=Math.max(1,t)},Ws=()=>xn,Cn=()=>In,nt=class extends gdjs.Variable{dirty=!0;operations=[];static setupSyncedVariable(t,e){let s=new nt;return t.has(e)&&gdjs.Variable.copy(t.get(e),s),t.add(e,s),s}static setupStateVariables(t){let e=nt.setupSyncedVariable(t,\"State\"),s=nt.setupSyncedVariable(t,\"PlayerState\"),i=nt.setupSyncedVariable(t,\"TeamState\");return{publicStateVariable:e,privateStateVariable:s,teamStateVariable:i}}reinitialize(t){if(this._type=\"number\",this._value=0,this._str=\"0\",this._bool=!1,this._children={},this._childrenArray=[],this._undefinedInContainer=!1,t!==void 0){if(this._type=t.type||\"number\",this._type===\"number\")this._value=parseFloat(t.value||\"0\"),this._value!==this._value&&(this._value=0);else if(this._type===\"string\")this._str=\"\"+t.value||\"0\";else if(this._type===\"boolean\")this._bool=!!t.value;else if(this._type===\"structure\"){if(t.children!==void 0)for(var e=0,s=t.children.length;e<s;++e){var i=t.children[e];if(i.name===void 0)continue;let n=new nt(i);this._children[i.name]=n,this.operations.push({type:1,targetName:i.name,targetVariable:n})}}else if(this._type===\"array\"&&t.children)for(let n of t.children){let a=new nt(n);this._childrenArray.push(a),this.operations.push({type:1,targetName:n.name,targetVariable:a})}}}setBoolean(t){t!==this._bool&&(this.dirty=!0),super.setBoolean(t)}setNumber(t){t!==this._value&&(this.dirty=!0),super.setNumber(t)}setString(t){t!==this._str&&(this.dirty=!0),super.setString(t)}clearChildren(){this.dirty=!0,this.operations.length=0,this.operations.push({type:3}),super.clearChildren()}static _convertToSyncedVariable(t){let e=t;if(Object.getPrototypeOf(e)!==nt.prototype){if(Object.setPrototypeOf(e,nt.prototype),e.operations=[],e.dirty=!0,e._type===\"array\"){let s=e._childrenArray.length;for(let i=0;i<s;i++)e.operations.push({type:1,targetName:i,targetVariable:this._convertToSyncedVariable(e._childrenArray[i])})}else if(e._type===\"structure\")for(let s in e._children)e.operations.push({type:1,targetName:s,targetVariable:this._convertToSyncedVariable(e._children[s])})}return e}addChild(t,e){return this.dirty=!0,e=nt._convertToSyncedVariable(e),this.operations.push({type:1,targetName:t,targetVariable:e}),super.addChild(t,e)}getChild(t){if(this.isPrimitive()&&this.castTo(\"structure\"),this._type===\"array\")return this.getChildAt(parseInt(t,10)||0);if(this._children[t]===void 0||this._children[t]===null){this.dirty=!0;let e=new nt;this._children[t]=e,this.operations.push({type:1,targetName:t,targetVariable:e})}return this._children[t]}getChildAt(t){if(this.castTo(\"array\"),this._childrenArray[t]===void 0||this._childrenArray[t]===null){this.dirty=!0;let e=new nt;this._childrenArray[t]=e,this.operations.push({type:1,targetName:t,targetVariable:e})}return this._childrenArray[t]}removeChild(t){super.removeChild(t),this.operations.push({type:2,targetName:t})}removeAtIndex(t){super.removeAtIndex(t),this.operations.push({type:2,targetName:t})}pushValue(t){this.dirty=!0;let e=this._childrenArray.length;this.castTo(\"array\"),this._childrenArray.push(new nt({type:typeof t,value:t})),this.operations.push({type:1,targetName:e,targetVariable:this._childrenArray[e]})}pushVariableCopy(t){this.dirty=!0;let e=this._childrenArray.length;this.castTo(\"array\"),this._childrenArray.push(gdjs.Variable.copy(t,new nt)),this.operations.push({type:1,targetName:e,targetVariable:this._childrenArray[e]})}getAllChildrenArray(){return super.getAllChildrenArray()}getAllChildren(){return super.getAllChildren()}isDirty(){if(this.dirty)return!0;if(!this.isPrimitive()){for(let t of this.getAllChildrenArray())if(t.isDirty())return this.dirty=!0,!0}return!1}serialize(t){switch(this.dirty=!1,this.getType()){case\"number\":return B.startVariable(t),B.addType(t,2),B.addNumber(t,this._value),B.endVariable(t);case\"string\":let i=t.createSharedString(this._str);return B.startVariable(t),B.addType(t,1),B.addText(t,i),B.endVariable(t);case\"boolean\":return B.startVariable(t),B.addType(t,3),B.addBoolean(t,this._bool),B.endVariable(t)}let e=[];for(let i of this.operations){let n=typeof i.targetName==\"string\"?t.createString(i.targetName):null,a=typeof i.targetName==\"number\"?i.targetName:null,r=i.targetVariable?i.targetVariable.serialize(t):null;Q.startCollectionOperation(t),Q.addOperation(t,i.type),n&&Q.addName(t,n),a&&Q.addIndex(t,a),r&&Q.addVal(t,r),e.push(Q.endCollectionOperation(t))}if(this.operations.length=0,this._type===\"array\")for(let i in this._childrenArray){let n=+i,a=this._childrenArray[n];if(a.isDirty()){let r=a.serialize(t);Q.startCollectionOperation(t),Q.addOperation(t,1),Q.addIndex(t,n),Q.addVal(t,r),e.push(Q.endCollectionOperation(t))}}else for(let[i,n]of Object.entries(this.getAllChildren()))if(n.isDirty()){let a=t.createString(i),r=n.serialize(t);Q.startCollectionOperation(t),Q.addOperation(t,1),Q.addName(t,a),Q.addVal(t,r),e.push(Q.endCollectionOperation(t))}let s=B.createOperationsVector(t,e);return B.startVariable(t),B.addType(t,this._type===\"structure\"?4:5),B.addOperations(t,s),B.endVariable(t)}serializeToBinary(){let t=new Gt(64);return t.finish(this.serialize(t)),t.asUint8Array()}},cr=class{connectedPlayers=new Set;connectionsQueue=[];disconnectionsQueue=[];_onConnect(t){this.connectedPlayers.add(t),this.connectionsQueue.push(t)}_onDisconnect(t){this.connectedPlayers.delete(t),this.disconnectionsQueue.push(t)}alreadyHas(t){return this.connectedPlayers.has(t)}popConnection(){return this.connectionsQueue.length?(Ae(this.connectionsQueue.shift()),!0):!1}popDisconnection(){return this.disconnectionsQueue.length?(Ae(this.disconnectionsQueue.shift()),!0):!1}},Un=(t,e)=>{let[s,i,n]=e.split(\";\").map(a=>parseInt(a,10));return Zs.createRGB(t,s,i,n)},fr=(t,e,s)=>{let i=e.getString?t.createSharedString(e.getString()):null;C.startObjState(t),C.addX(t,e.getX()),C.addY(t,e.getY()),C.addHeight(t,e.getHeight()),C.addWidth(t,e.getWidth()),C.addAngle(t,e.getAngle()),e.getX()===0&&C.addSetXTo0(t,!0),e.getY()===0&&C.addSetYTo0(t,!0),e.getHeight()===0&&C.addSetHeightTo0(t,!0),e.getWidth()===0&&C.addSetWidthTo0(t,!0),e.getAngle()===0&&C.addSetAngleTo0(t,!0),e.getZOrder()<=65535?C.addZOrder(t,e.getZOrder()+1):C.addBigZOrder(t,e.getZOrder()+1),C.addVisible(t,e.isHidden()?1:2),e.isFlippedX&&C.addFlippedX(t,e.isFlippedX()?1:2),e.isFlippedY&&C.addFlippedY(t,e.isFlippedY()?1:2),e.getOpacity&&(e.getOpacity()!==0?C.addOpacity(t,e.getOpacity()):C.addSetOpacityTo0(t,!0)),e.getAnimation&&C.addAnimation(t,e.getAnimation()+1),e.getColor&&C.addTint(t,Un(t,e.getColor())),i&&C.addText(t,i);let n=C.endObjState(t),{stateVariables:a}=e,{publicStateVariable:r,privateStateVariable:o}=a,c=r.getChildrenCount()!==0?K.createPackedPublicStateVector(t,ke(r)):null,l=o.getChild(s),d=l.getChildrenCount()!==0?K.createPackedPrivateStateVector(t,ke(l)):null,O=t.createSharedString(e.getName());return K.startGameObject(t),K.addId(t,e.thnkID),K.addName(t,O),K.addObjState(t,n),c&&K.addPackedPublicState(t,c),d&&K.addPackedPrivateState(t,d),K.endGameObject(t)},_r=new gdjs.Logger(\"THNK - Objects replication\"),ur=class{recycledIDs=[];currentNewID=1;generateNewID=()=>{let t=this.recycledIDs.pop()??this.currentNewID++;return t>65535?(_r.error(\"Maximum amount of simultaneously replicated objects reached! Weird stuff is going to happen...\"),t%65535):t};registeredObjects=new Map;forEach(t){for(let e of this.registeredObjects.values())t(e)}registerObject(t){t.thnkID=this.generateNewID(),this.registeredObjects.set(t.thnkID,t),this.createdObjects.set(t.thnkID,t.getName()),t.stateVariables=nt.setupStateVariables(t.getVariables())}unregisterObject(t){this.recycledIDs.push(t.thnkID),this.registeredObjects.delete(t.thnkID),this.deletedObjects.add(t.thnkID),this.createdObjects.delete(t.thnkID)}createObjectsSnapshot(t,e){let s=[];for(let i of this.registeredObjects.values())s.push(fr(t,i,e));return s}createdObjects=new Map;deletedObjects=new Set;getCreatedObjects(){let t=[...this.createdObjects.entries()];return this.createdObjects.clear(),t}getDeletedObjects(){let t=Uint16Array.from(this.deletedObjects.values());return this.deletedObjects.clear(),t}},pr=class{diffsCount;diffs;currentDiff=0;constructor(){this.diffsCount=Math.min(30,Ws()*4),this.diffs=new Array(this.diffsCount)}createSnapshot(t){let e=Vn.createDiff(t);return e&&(this.diffs[++this.currentDiff%this.diffsCount]=e),e}getSnapshot(t){return this.currentDiff-t>this.diffsCount?null:this.diffs[t%this.diffsCount]}},Vn=class{sceneDiff;constructor(){}static createDiff(t){let e=Dn.createDiff(t);if(!e)return null;let s=new Vn;return s.sceneDiff=e,s}serialize(t,e){return this.sceneDiff?.serialize(t,e)}},Dn=class{publicStateVariableDiff;privateStateVariablesDiffs=new Map;teamStateVariablesDiffs=new Map;objectsDiff=new Map;deletedObjects=new Set;createdObjects=new Map;newPlayersObjects=vn();oldPlayersObjects=Sn();constructor(){}static createDiff(t){let{thnkServer:e}=t;if(!e)throw new Error(\"Impossible to take a diff snapshot when not running a THNK server!\");let{stateVariables:s,objectsRegistery:i}=e,{publicStateVariable:n,privateStateVariable:a,teamStateVariable:r}=s,o=new Dn;n.isDirty()&&(o.publicStateVariableDiff=n.serializeToBinary());{let c=a.getAllChildren();for(let l in c)c[l].isDirty()&&o.privateStateVariablesDiffs.set(l,c[l].serializeToBinary())}{let c=r.getAllChildren();for(let l in c)c[l].isDirty()&&o.teamStateVariablesDiffs.set(l,c[l].serializeToBinary())}i.forEach(c=>{let l=Tn.createDiff(c);l&&o.objectsDiff.set(c.thnkID,l)});for(let[c,l]of i.getCreatedObjects())o.createdObjects.set(c,l);for(let c of i.getDeletedObjects())o.deletedObjects.add(c);return o}serialize(t,e){let s=this.publicStateVariableDiff?N.createPublicStateDiffVector(t,this.publicStateVariableDiff):null,i=this.privateStateVariablesDiffs.get(e),n=i?N.createPrivateStateDiffVector(t,i):null,a=[];for(let u of this.objectsDiff.values())u.needsToBeSerialized(e)&&a.push(u.serialize(t,e));let r=a.length?N.createObjectsVector(t,a):null,o=null;if(this.createdObjects.size){let u=new Uint16Array(this.createdObjects.size),U=0;for(let[z,x]of this.createdObjects){let I=t.createSharedString(x);u[U++]=Pt.createCreatedObject(t,z,I)}o=N.createCreatedObjectsVector(t,u)}let c=this.deletedObjects.size?N.createDeletedObjectsVector(t,[...this.deletedObjects]):null,l=this.newPlayersObjects.get(e),d=l&&l.size?N.createNewOwnedObjectsVector(t,Array.from(l.values())):null,O=this.oldPlayersObjects.get(e),g=O&&O.size?N.createOldOwnedObjectsVector(t,Array.from(O.values())):null;return N.startScene(t),s&&N.addPublicStateDiff(t,s),n&&N.addPrivateStateDiff(t,n),r&&N.addObjects(t,r),o&&N.addCreatedObjects(t,o),c&&N.addDeletedObjects(t,c),d&&N.addNewOwnedObjects(t,d),g&&N.addOldOwnedObjects(t,g),N.endScene(t)}},Tn=class{id;aabb;publicStateVariableDiff;privateStateVariablesDiffs=new Map;teamStateVariablesDiffs=new Map;propertyChanged=!1;x;y;height;width;angle;zOrder;hidden;flippedX;flippedY;opacity;animation;string;color;constructor(t,e){this.id=t,this.aabb=e}static createDiff(t){let e=new Tn(t.thnkID,t.getVisibilityAABB()||t.getAABB());t.getX()!==t.prevX&&(t.prevX=t.getX(),e.propertyChanged=!0,e.x=t.getX()),t.getY()!==t.prevY&&(t.prevY=t.getY(),e.propertyChanged=!0,e.y=t.getY()),t.getHeight()!==t.prevHeight&&(t.prevHeight=t.getHeight(),e.propertyChanged=!0,e.height=t.getHeight()),t.getWidth()!==t.prevWidth&&(t.prevWidth=t.getWidth(),e.propertyChanged=!0,e.width=t.getWidth()),t.getAngle()!==t.prevAngle&&(t.prevAngle=t.getAngle(),e.propertyChanged=!0,e.angle=t.getAngle()),t.getZOrder()!==t.prevZOrder&&(t.prevZOrder=t.getZOrder(),e.propertyChanged=!0,e.zOrder=t.getZOrder()),t.isHidden()!==t.prevVisibility&&(t.prevVisibility=t.isHidden(),e.propertyChanged=!0,e.hidden=t.isHidden()),t.isFlippedX&&t.isFlippedX()!==t.prevFlippedX&&(t.prevFlippedX=t.isFlippedX(),e.propertyChanged=!0,e.flippedX=t.isFlippedX()),t.isFlippedY&&t.isFlippedY()!==t.prevFlippedY&&(t.prevFlippedY=t.isFlippedY(),e.propertyChanged=!0,e.flippedY=t.isFlippedY()),t.getOpacity&&t.getOpacity()!==t.prevOpacity&&(t.prevOpacity=t.getOpacity(),e.propertyChanged=!0,e.opacity=t.getOpacity()),t.getString&&t.getString()!==t.prevText&&(t.prevText=t.getString(),e.propertyChanged=!0,e.string=t.getString()),t.getColor&&t.getColor()!==t.prevColor&&(t.prevColor=t.getColor(),e.propertyChanged=!0,e.color=t.getColor()),t.getAnimation&&t.getAnimation()!==t.prevAnimation&&(t.prevAnimation=t.getAnimation(),e.propertyChanged=!0,e.animation=t.getAnimation());let{publicStateVariable:s,privateStateVariable:i,teamStateVariable:n}=t.stateVariables;s.isDirty()&&(e.publicStateVariableDiff=s.serializeToBinary());{let a=i.getAllChildren();for(let r in a)a[r].isDirty()&&e.privateStateVariablesDiffs.set(r,a[r].serializeToBinary())}{let a=n.getAllChildren();for(let r in a)a[r].isDirty()&&e.teamStateVariablesDiffs.set(r,a[r].serializeToBinary())}return e.propertyChanged||e.publicStateVariableDiff||e.privateStateVariablesDiffs.size||e.teamStateVariablesDiffs.size?e:null}needsToBeSerialized(t){return this.propertyChanged||this.publicStateVariableDiff||this.privateStateVariablesDiffs.has(t)}serialize(t,e){let s=this.string!==void 0?t.createSharedString(this.string):null;this.propertyChanged&&(C.startObjState(t),this.x!==void 0&&(this.x===0?C.addSetXTo0(t,!0):C.addX(t,this.x)),this.y!==void 0&&(this.y===0?C.addSetYTo0(t,!0):C.addY(t,this.y)),this.height!==void 0&&(this.height===0?C.addSetHeightTo0(t,!0):C.addHeight(t,this.height)),this.width!==void 0&&(this.width===0?C.addSetWidthTo0(t,!0):C.addWidth(t,this.width)),this.angle!==void 0&&(this.angle===0?C.addSetAngleTo0(t,!0):C.addAngle(t,this.angle)),this.zOrder!==void 0&&(this.zOrder<=65535?C.addZOrder(t,this.zOrder+1):C.addBigZOrder(t,this.zOrder+1)),this.hidden!==void 0&&C.addVisible(t,this.hidden?1:2),this.flippedX!==void 0&&C.addFlippedX(t,this.flippedX?1:2),this.flippedY!==void 0&&C.addFlippedY(t,this.flippedY?1:2),this.opacity!==void 0&&(this.opacity===0?C.addSetOpacityTo0(t,!0):C.addOpacity(t,this.opacity)),this.animation!==void 0&&C.addAnimation(t,this.animation+1),s&&C.addText(t,s),this.color!==void 0&&C.addTint(t,Un(t,this.color)));let i=this.propertyChanged?C.endObjState(t):null,n=this.publicStateVariableDiff?K.createPublicStateDiffVector(t,this.publicStateVariableDiff):null,a=this.privateStateVariablesDiffs.get(e),r=a?K.createPrivateStateDiffVector(t,a):null;return K.startGameObject(t),K.addId(t,this.id),i&&K.addObjState(t,i),n&&K.addPublicStateDiff(t,n),r&&K.addPrivateStateDiff(t,r),K.endGameObject(t)}},gr=class{adapter;stateVariables;objectsRegistery=new ur;playerManager=new cr;runServerCode=!0;previouslyConnectedUsers;snapshotsManager=new pr;constructor(t,e){this.adapter=t,this.stateVariables=e}},zn=(t,e)=>{t.thnkServer=new gr(e,nt.setupStateVariables(t.getVariables())),Cn()||t.thnkServer.playerManager._onConnect(e.getServerID())},Ds=new gdjs.Logger(\"THNK - Server\"),cs=0,wr=t=>{if(!t.thnkServer)return;let{adapter:e}=t.thnkServer;for(let[i,n]of e.getUsersPendingMessages()){for(let a of n)switch(a.contentType()){case 1:if(t.thnkServer.playerManager.alreadyHas(i))continue;sr(i,e,t),t.thnkServer.playerManager._onConnect(i),mn(t);continue;case 2:let r=a.content(new jt),o=r.name();if(!o)continue;let c=r.contentArray();ar(i,o,c);continue;default:Ds.error(`Received message with unknown type '${a.contentType()}'`);continue}n.length=0}for(let i of e.getDisconnectedUsers())t.thnkServer.playerManager._onDisconnect(i),On(t,i);e.getDisconnectedUsers().length=0;let s=t.getTimeManager();cs+=s.getElapsedTime()/s.getTimeScale(),cs>1e3/Ws()&&(cs=0,t.thnkServer.runServerCode=!0);{let i=t.thnkServer.adapter.getServerID(),n=r=>{let o=r.getChild(i).getAllChildren();for(let c in o)r.addChild(c,o[c])},{privateStateVariable:a}=t.thnkServer.stateVariables;n(a),t.thnkServer.objectsRegistery.forEach(r=>n(r.getVariables().get(\"PlayerState\")))}},yr=t=>{if(!t.thnkServer||!t.thnkServer.runServerCode)return;t.thnkServer.runServerCode=!1;let{snapshotsManager:e}=t.thnkServer,s=e.createSnapshot(t);if(s)for(let i of t.thnkServer.playerManager.connectedPlayers.values())i!==t.thnkServer.adapter.getServerID()&&ir(i,t.thnkServer.adapter,s)},ae=null,Pn=(t,e)=>{if(t.thnkServer){let{adapter:s}=t.thnkServer;ae={adapter:s,isPause:e},e&&(t.thnkServer.previouslyConnectedUsers=new Set(s.getConnectedUsers()))}},mr=t=>{if(ae){let{adapter:e,isPause:s}=ae;zn(t,e);for(let i of e.getConnectedUsers())t.thnkServer.playerManager._onConnect(i);nr(e,t.getName(),s),ae=null}},vr=t=>{if(ae)if(t.thnkServer){let{adapter:e,previouslyConnectedUsers:s}=t.thnkServer;if(s){let i=[],n=[];for(let a of e.getConnectedUsers())s.has(a)?n.push(a):i.push(a);bs(i,e,t),bs(n,e)}else Ds.warn(\"List of previously connected players not found! A full snapshot will be sent to all players. This is likely a bug, please open an issue on the THNK GitHub page!\"),bs([...e.getConnectedUsers()],e,t)}else Ds.warn(\"Resumed a scene that is not a server, shutting the server down. This is likely a bug, please open an issue on the THNK GitHub page!\"),ae.adapter.close()};gdjs.registerRuntimeScenePreEventsCallback(wr);gdjs.registerRuntimeScenePostEventsCallback(yr);gdjs.registerRuntimeSceneUnloadedCallback(t=>Pn(t,!1));gdjs.registerRuntimeScenePausedCallback(t=>Pn(t,!0));gdjs.registerRuntimeSceneLoadedCallback(mr);gdjs.registerRuntimeSceneResumedCallback(vr);var Sr=new gdjs.Logger(\"THNK - Server\"),Or=async(t,e,s)=>{try{await t.prepare(e)}catch(n){Sr.error(\"Adapter crashed while starting server! Error: \",n);return}let i=s?e.getGame().getSceneStack().replace(s,!0):e;zn(i,t)},kr={popMessage:or,addRawMessageToTheQueue:rr,popConnection:lr,popDisconnection:dr},Fn={};be(Fn,{PlayerBehavior:()=>Mn,getConnectionState:()=>Dr,messages:()=>Rr,startClient:()=>Fr});var le=(t,e)=>{switch(e.type()){case 1:return t.setString(e.text()),t;case 2:return t.setNumber(e.number()),t;case 3:return t.setBoolean(e.boolean()),t}if(e.type()===4){t.castTo(\"structure\");for(let s=e.operationsLength(),i=0,n=e.operations(0);i<s;n=e.operations(++i))switch(n.operation()){case 1:let a=n.name(),r=n.val();a&&r&&le(t.getChild(a),r);continue;case 2:let o=n.name();o&&t.removeChild(o);continue;case 3:t.clearChildren();continue}}else{t.castTo(\"array\");for(let s=e.operationsLength(),i=0,n=e.operations(0);i<s;n=e.operations(++i))switch(n.operation()){case 1:let a=n.val();a&&le(t.getChildAt(n.index()),a);continue;case 2:t.removeAtIndex(n.index());continue;case 3:t.clearChildren();continue}}return t},jr=new Zs,Rn=(t,e)=>{let s=t.objState();if(s){let o=s.x();o!==null&&e.setX(o);let c=s.y();c!==null&&e.setY(c);let l=s.height();l!==null&&e.setHeight(l);let d=s.width();d!==null&&e.setWidth(d);let O=s.angle();O!==null&&e.setAngle(O),s.setXTo0()&&e.setX(0),s.setYTo0()&&e.setY(0),s.setHeightTo0()&&e.setHeight(0),s.setWidthTo0()&&e.setWidth(0),s.setAngleTo0()&&e.setAngle(0);{let x=s.visible();x!==null&&e.hide(x===1);let I=s.flippedX();I!==null&&e.flipX&&e.flipX(I===1);let k=s.flippedY();k!==null&&e.flipY&&e.flipY(k===1)}let g=s.zOrder()??s.bigZOrder();g!==null&&e.setZOrder(g-1);let u=s.opacity();e.setOpacity&&(u!==null&&e.setOpacity(u),s.setOpacityTo0()&&e.setOpacity(0));let U=s.animation();U!==null&&e.setAnimation&&e.setAnimation(U-1);let z=s.text();if(z!==null&&e.setString&&e.setString(z),e.setColor){let x=s.tint(jr);x&&e.setColor(`${x.r()};${x.g()};${x.b()}`)}}let i=e.getVariables().get(\"State\"),n=t.publicStateDiffArray();if(n)le(i,B.getRootAsVariable(new Dt(n)));else{let o=t.packedPublicStateArray();o&&je(i,o)}let a=e.getVariables().get(\"PlayerState\"),r=t.privateStateDiffArray();if(r)le(a,B.getRootAsVariable(new Dt(r)));else{let o=t.packedPrivateStateArray();o&&je(a,o)}},Mn={};be(Mn,{_addNewPBLinks:()=>Bn,_reinitializePBLinks:()=>Ln,_removeOldPBLinks:()=>Nn,pickObjectsOfPlayer:()=>Ir});var as=new gdjs.LongLivedObjectsList,En=t=>{as.addObject(t.getName(),t)},Ar=t=>{as.removeObject(t.getName(),t)},Bn=(t,e)=>{if(!t.thnkClient)throw new Error(\"Expected a THNK client!\");for(let s of e){let i=t.thnkClient.objectsRegistery.getObject(s);if(!i)throw new Error(`Received link of invalid object \"${s}\" from server!`);En(i)}},Nn=(t,e)=>{if(!t.thnkClient)throw new Error(\"Expected a THNK client!\");for(let s of e){let i=t.thnkClient.objectsRegistery.getObject(s);if(!i)throw new Error(`Received unlink of invalid object \"${s}\" from server!`);Ar(i)}},Ln=(t,e)=>{if(!t.thnkClient)throw new Error(\"Expected a THNK client!\");if(as=new gdjs.LongLivedObjectsList,!!e)for(let s of e){let i=t.thnkClient.objectsRegistery.getObject(s);if(!i)throw new Error(`Received reference to invalid owned object \"${s}\" from server!`);En(i)}},Ir=t=>{let e=!1;for(let[s,i]of Object.entries(t.items)){let n=as.getObjects(s);n.length&&(gdjs.copyArray(n,i),e=!0)}return e},Zn=(t,e)=>{if(!e.thnkClient)return;let{objectsRegistery:s}=e.thnkClient,i=t.publicStatePackedArray();i&&je(e.getVariables().get(\"State\"),i);let n=t.privateStatePackedArray();if(n&&je(e.getVariables().get(\"PlayerState\"),n),s.clear(),t.objectsLength()>0)for(let a=t.objectsLength(),r=0,o=t.objects(0);r<a;o=t.objects(++r)){let c=o.name();if(!c)continue;let l=e.createObject(c);Rn(o,l),s.registerObject(o.id(),l)}Ln(e,t.ownedObjectsArray())},xr=(t,e)=>{if(!e.thnkClient)return;let{objectsRegistery:s}=e.thnkClient,i=t.publicStateDiffArray();i&&le(e.getVariables().get(\"State\"),B.getRootAsVariable(new Dt(i)));let n=t.privateStateDiffArray();n&&le(e.getVariables().get(\"PlayerState\"),B.getRootAsVariable(new Dt(n)));let a=t.oldOwnedObjectsArray();a&&Nn(e,a);let r=t.deletedObjectsArray();if(r)for(let c of r)s.deleteObject(c);if(t.createdObjectsLength()!==0)for(let c=t.createdObjectsLength(),l=0,d=t.createdObjects(0);l<c;d=t.createdObjects(++l)){let O=d.name();if(!O)continue;let g=e.createObject(O);s.registerObject(d.id(),g)}if(t.objectsLength()!==0)for(let c=t.objectsLength(),l=0,d=t.objects(0);l<c;d=t.objects(++l)){let O=s.getObject(d.id());if(!O){let g=d.name();g&&(O=e.createObject(g),s.registerObject(d.id(),O))}O&&Rn(d,O)}let o=t.newOwnedObjectsArray();o&&Bn(e,o)},wi=new gdjs.Logger(\"THNK - Client\"),Cr=t=>{if(!t.thnkClient)return;let{adapter:e}=t.thnkClient;for(let s of e.getPendingMessages())switch(s.contentType()){case 1:wi.warn(\"A second ConnectionStartMessage was received from the server. This is likely a bug, please open an issue on the THNK GitHub!\");continue;case 2:let i=s.content(new Ct).scene();i&&xr(i,t);continue;case 3:let n=s.content(new _t),a=n.sceneName();if(!a){console.error(\"Server requested scene switch, but no scene name was sent! This is likely a bug, please open an issue on the THNK GitHub!\");continue}let r=n.isPause()?t.getGame().getSceneStack().push(a):t.getGame().getSceneStack().replace(a,!0);r.thnkClient=t.thnkClient,t=r;continue;case 4:let o=s.content(new ft),c=o.name(),l=null;try{l=c?t.getGame().getSceneStack().replace(c,!0):t.getGame().getSceneStack().pop()}catch{console.info(\"Error spotted!\")}if(!l)continue;let d=o.snapshot();d&&Zn(d,l),l.thnkClient=t.thnkClient,t=l;continue;default:wi.error(`Received message with unknown type '${s.contentType()}'`)}e.markPendingMessagesAsRead()};gdjs.registerRuntimeScenePreEventsCallback(Cr);var Ur=(t,e)=>{let s=new Gt(32),i=e?s.createString(e):null;Ft.startConnectionRequestMessage(s),i&&Ft.addToken(s,i);let n=Ft.endConnectionRequestMessage(s);t.sendClientMessage(s,At.createClientMessage(s,1,n))},Vr=(t,e,s)=>{let i=new Gt(256),n=i.createString(e),a=jt.createContentVector(i,ke(s)),r=jt.createClientInputMessage(i,n,a);t.sendClientMessage(i,At.createClientMessage(i,2,r))},Hn=\"disconnected\",me=t=>Hn=t,Dr=()=>Hn,Tr=class{objectsRegistery=new Map;runtimeScene;constructor(t){this.runtimeScene=t}registerObject(t,e){e.thnkID=t,this.objectsRegistery.set(t,e)}getObject(t){return this.objectsRegistery.get(t)}deleteObject(t){let e=this.objectsRegistery.get(t);!e||(e.deleteFromScene(this.runtimeScene),this.objectsRegistery.delete(t))}clear(){this.objectsRegistery.forEach(t=>t.deleteFromScene(this.runtimeScene)),this.objectsRegistery.clear()}},zr=class{adapter;objectsRegistery;constructor(t,e){this.adapter=t,this.objectsRegistery=new Tr(e)}},Pr=new gdjs.Logger(\"THNK - Client\"),yi=t=>{me(\"failed\"),Pr.error(\"Connection failed: \"+t)},Fr=async(t,e)=>{me(\"connecting\");let s=t.getGame().getSceneStack();try{await e.prepare(t)}catch{yi(\"Adapter crashed while starting server!\");return}me(\"loading\"),Ur(e);let i=setInterval(()=>{let n=e.getPendingMessages().shift();if(!!n&&n.contentType()===1){clearInterval(i);let a=n.content(new Wt),r=a.sceneName(),o=a.sceneSnapshot();if(!r||!o){yi(\"Server Connection Start Message was invalid, couldn't finish setting up the connection.\");return}let c=s.replace(r,!0);c.thnkClient=new zr(e,c),Zn(o,c),me(\"connected\")}},200)},Rr={sendClientMessage:Vr};function ce(t){let e=t.length;for(;--e>=0;)t[e]=0}var Mr=0,Gn=1,Er=2,Br=3,Nr=258,Ks=29,Me=256,xe=Me+1+Ks,re=30,qs=19,Yn=2*xe+1,Kt=15,fs=16,Lr=7,$s=256,Xn=16,Wn=17,Kn=18,Ts=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Je=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Zr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),qn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hr=512,It=new Array((xe+2)*2);ce(It);var ve=new Array(re*2);ce(ve);var Ce=new Array(Hr);ce(Ce);var Ue=new Array(Nr-Br+1);ce(Ue);var Qs=new Array(Ks);ce(Qs);var es=new Array(re);ce(es);function _s(t,e,s,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=s,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}var $n,Qn,Jn;function us(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}var ta=t=>t<256?Ce[t]:Ce[256+(t>>>7)],Ve=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},rt=(t,e,s)=>{t.bi_valid>fs-s?(t.bi_buf|=e<<t.bi_valid&65535,Ve(t,t.bi_buf),t.bi_buf=e>>fs-t.bi_valid,t.bi_valid+=s-fs):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=s)},yt=(t,e,s)=>{rt(t,s[e*2],s[e*2+1])},ea=(t,e)=>{let s=0;do s|=t&1,t>>>=1,s<<=1;while(--e>0);return s>>>1},Gr=t=>{t.bi_valid===16?(Ve(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},Yr=(t,e)=>{let s=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,a=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,d,O,g,u,U,z=0;for(g=0;g<=Kt;g++)t.bl_count[g]=0;for(s[t.heap[t.heap_max]*2+1]=0,l=t.heap_max+1;l<Yn;l++)d=t.heap[l],g=s[s[d*2+1]*2+1]+1,g>c&&(g=c,z++),s[d*2+1]=g,!(d>i)&&(t.bl_count[g]++,u=0,d>=o&&(u=r[d-o]),U=s[d*2],t.opt_len+=U*(g+u),a&&(t.static_len+=U*(n[d*2+1]+u)));if(z!==0){do{for(g=c-1;t.bl_count[g]===0;)g--;t.bl_count[g]--,t.bl_count[g+1]+=2,t.bl_count[c]--,z-=2}while(z>0);for(g=c;g!==0;g--)for(d=t.bl_count[g];d!==0;)O=t.heap[--l],!(O>i)&&(s[O*2+1]!==g&&(t.opt_len+=(g-s[O*2+1])*s[O*2],s[O*2+1]=g),d--)}},sa=(t,e,s)=>{let i=new Array(Kt+1),n=0,a,r;for(a=1;a<=Kt;a++)n=n+s[a-1]<<1,i[a]=n;for(r=0;r<=e;r++){let o=t[r*2+1];o!==0&&(t[r*2]=ea(i[o]++,o))}},Xr=()=>{let t,e,s,i,n,a=new Array(Kt+1);for(s=0,i=0;i<Ks-1;i++)for(Qs[i]=s,t=0;t<1<<Ts[i];t++)Ue[s++]=i;for(Ue[s-1]=i,n=0,i=0;i<16;i++)for(es[i]=n,t=0;t<1<<Je[i];t++)Ce[n++]=i;for(n>>=7;i<re;i++)for(es[i]=n<<7,t=0;t<1<<Je[i]-7;t++)Ce[256+n++]=i;for(e=0;e<=Kt;e++)a[e]=0;for(t=0;t<=143;)It[t*2+1]=8,t++,a[8]++;for(;t<=255;)It[t*2+1]=9,t++,a[9]++;for(;t<=279;)It[t*2+1]=7,t++,a[7]++;for(;t<=287;)It[t*2+1]=8,t++,a[8]++;for(sa(It,xe+1,a),t=0;t<re;t++)ve[t*2+1]=5,ve[t*2]=ea(t,5);$n=new _s(It,Ts,Me+1,xe,Kt),Qn=new _s(ve,Je,0,re,Kt),Jn=new _s(new Array(0),Zr,0,qs,Lr)},ia=t=>{let e;for(e=0;e<xe;e++)t.dyn_ltree[e*2]=0;for(e=0;e<re;e++)t.dyn_dtree[e*2]=0;for(e=0;e<qs;e++)t.bl_tree[e*2]=0;t.dyn_ltree[$s*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},na=t=>{t.bi_valid>8?Ve(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},mi=(t,e,s,i)=>{let n=e*2,a=s*2;return t[n]<t[a]||t[n]===t[a]&&i[e]<=i[s]},ps=(t,e,s)=>{let i=t.heap[s],n=s<<1;for(;n<=t.heap_len&&(n<t.heap_len&&mi(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!mi(e,i,t.heap[n],t.depth));)t.heap[s]=t.heap[n],s=n,n<<=1;t.heap[s]=i},vi=(t,e,s)=>{let i,n,a=0,r,o;if(t.sym_next!==0)do i=t.pending_buf[t.sym_buf+a++]&255,i+=(t.pending_buf[t.sym_buf+a++]&255)<<8,n=t.pending_buf[t.sym_buf+a++],i===0?yt(t,n,e):(r=Ue[n],yt(t,r+Me+1,e),o=Ts[r],o!==0&&(n-=Qs[r],rt(t,n,o)),i--,r=ta(i),yt(t,r,s),o=Je[r],o!==0&&(i-=es[r],rt(t,i,o)));while(a<t.sym_next);yt(t,$s,e)},zs=(t,e)=>{let s=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,a=e.stat_desc.elems,r,o,c=-1,l;for(t.heap_len=0,t.heap_max=Yn,r=0;r<a;r++)s[r*2]!==0?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):s[r*2+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,s[l*2]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[l*2+1]);for(e.max_code=c,r=t.heap_len>>1;r>=1;r--)ps(t,s,r);l=a;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],ps(t,s,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,s[l*2]=s[r*2]+s[o*2],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,s[r*2+1]=s[o*2+1]=l,t.heap[1]=l++,ps(t,s,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Yr(t,e),sa(s,c,t.bl_count)},Si=(t,e,s)=>{let i,n=-1,a,r=e[0*2+1],o=0,c=7,l=4;for(r===0&&(c=138,l=3),e[(s+1)*2+1]=65535,i=0;i<=s;i++)a=r,r=e[(i+1)*2+1],!(++o<c&&a===r)&&(o<l?t.bl_tree[a*2]+=o:a!==0?(a!==n&&t.bl_tree[a*2]++,t.bl_tree[Xn*2]++):o<=10?t.bl_tree[Wn*2]++:t.bl_tree[Kn*2]++,o=0,n=a,r===0?(c=138,l=3):a===r?(c=6,l=3):(c=7,l=4))},Oi=(t,e,s)=>{let i,n=-1,a,r=e[0*2+1],o=0,c=7,l=4;for(r===0&&(c=138,l=3),i=0;i<=s;i++)if(a=r,r=e[(i+1)*2+1],!(++o<c&&a===r)){if(o<l)do yt(t,a,t.bl_tree);while(--o!==0);else a!==0?(a!==n&&(yt(t,a,t.bl_tree),o--),yt(t,Xn,t.bl_tree),rt(t,o-3,2)):o<=10?(yt(t,Wn,t.bl_tree),rt(t,o-3,3)):(yt(t,Kn,t.bl_tree),rt(t,o-11,7));o=0,n=a,r===0?(c=138,l=3):a===r?(c=6,l=3):(c=7,l=4)}},Wr=t=>{let e;for(Si(t,t.dyn_ltree,t.l_desc.max_code),Si(t,t.dyn_dtree,t.d_desc.max_code),zs(t,t.bl_desc),e=qs-1;e>=3&&t.bl_tree[qn[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},Kr=(t,e,s,i)=>{let n;for(rt(t,e-257,5),rt(t,s-1,5),rt(t,i-4,4),n=0;n<i;n++)rt(t,t.bl_tree[qn[n]*2+1],3);Oi(t,t.dyn_ltree,e-1),Oi(t,t.dyn_dtree,s-1)},qr=t=>{let e=4093624447,s;for(s=0;s<=31;s++,e>>>=1)if(e&1&&t.dyn_ltree[s*2]!==0)return 0;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return 1;for(s=32;s<Me;s++)if(t.dyn_ltree[s*2]!==0)return 1;return 0},ki=!1,$r=t=>{ki||(Xr(),ki=!0),t.l_desc=new us(t.dyn_ltree,$n),t.d_desc=new us(t.dyn_dtree,Qn),t.bl_desc=new us(t.bl_tree,Jn),t.bi_buf=0,t.bi_valid=0,ia(t)},aa=(t,e,s,i)=>{rt(t,(Mr<<1)+(i?1:0),3),na(t),Ve(t,s),Ve(t,~s),s&&t.pending_buf.set(t.window.subarray(e,e+s),t.pending),t.pending+=s},Qr=t=>{rt(t,Gn<<1,3),yt(t,$s,It),Gr(t)},Jr=(t,e,s,i)=>{let n,a,r=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=qr(t)),zs(t,t.l_desc),zs(t,t.d_desc),r=Wr(t),n=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=n&&(n=a)):n=a=s+5,s+4<=n&&e!==-1?aa(t,e,s,i):t.strategy===4||a===n?(rt(t,(Gn<<1)+(i?1:0),3),vi(t,It,ve)):(rt(t,(Er<<1)+(i?1:0),3),Kr(t,t.l_desc.max_code+1,t.d_desc.max_code+1,r+1),vi(t,t.dyn_ltree,t.dyn_dtree)),ia(t),i&&na(t)},to=(t,e,s)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=s,e===0?t.dyn_ltree[s*2]++:(t.matches++,e--,t.dyn_ltree[(Ue[s]+Me+1)*2]++,t.dyn_dtree[ta(e)*2]++),t.sym_next===t.sym_end),eo=$r,so=aa,io=Jr,no=to,ao=Qr,ro={_tr_init:eo,_tr_stored_block:so,_tr_flush_block:io,_tr_tally:no,_tr_align:ao},oo=(t,e,s,i)=>{let n=t&65535|0,a=t>>>16&65535|0,r=0;for(;s!==0;){r=s>2e3?2e3:s,s-=r;do n=n+e[i++]|0,a=a+n|0;while(--r);n%=65521,a%=65521}return n|a<<16|0},De=oo,lo=()=>{let t,e=[];for(var s=0;s<256;s++){t=s;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[s]=t}return e},ho=new Uint32Array(lo()),bo=(t,e,s,i)=>{let n=ho,a=i+s;t^=-1;for(let r=i;r<a;r++)t=t>>>8^n[(t^e[r])&255];return t^-1},tt=bo,Qt={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"},fe={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:co,_tr_stored_block:Ps,_tr_flush_block:fo,_tr_tally:Nt,_tr_align:_o}=ro,{Z_NO_FLUSH:Lt,Z_PARTIAL_FLUSH:uo,Z_FULL_FLUSH:po,Z_FINISH:ct,Z_BLOCK:ji,Z_OK:st,Z_STREAM_END:Ai,Z_STREAM_ERROR:vt,Z_DATA_ERROR:go,Z_BUF_ERROR:gs,Z_DEFAULT_COMPRESSION:wo,Z_FILTERED:yo,Z_HUFFMAN_ONLY:Ge,Z_RLE:mo,Z_FIXED:vo,Z_DEFAULT_STRATEGY:So,Z_UNKNOWN:Oo,Z_DEFLATED:rs}=fe,ko=9,jo=15,Ao=8,Io=29,xo=256,Fs=xo+1+Io,Co=30,Uo=19,Vo=2*Fs+1,Do=15,F=3,Et=258,St=Et+F+1,To=32,de=42,Js=57,Rs=69,Ms=73,Es=91,Bs=103,qt=113,we=666,at=1,_e=2,Jt=3,ue=4,zo=3,$t=(t,e)=>(t.msg=Qt[e],e),Ii=t=>t*2-(t>4?9:0),Rt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Po=t=>{let e,s,i,n=t.w_size;e=t.hash_size,i=e;do s=t.head[--i],t.head[i]=s>=n?s-n:0;while(--e);e=n,i=e;do s=t.prev[--i],t.prev[i]=s>=n?s-n:0;while(--e)},Fo=(t,e,s)=>(e<<t.hash_shift^s)&t.hash_mask,Zt=Fo,ot=t=>{let e=t.state,s=e.pending;s>t.avail_out&&(s=t.avail_out),s!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+s),t.next_out),t.next_out+=s,e.pending_out+=s,t.total_out+=s,t.avail_out-=s,e.pending-=s,e.pending===0&&(e.pending_out=0))},lt=(t,e)=>{fo(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ot(t.strm)},E=(t,e)=>{t.pending_buf[t.pending++]=e},ge=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},Ns=(t,e,s,i)=>{let n=t.avail_in;return n>i&&(n=i),n===0?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),s),t.state.wrap===1?t.adler=De(t.adler,e,n,s):t.state.wrap===2&&(t.adler=tt(t.adler,e,n,s)),t.next_in+=n,t.total_in+=n,n)},ra=(t,e)=>{let s=t.max_chain_length,i=t.strstart,n,a,r=t.prev_length,o=t.nice_match,c=t.strstart>t.w_size-St?t.strstart-(t.w_size-St):0,l=t.window,d=t.w_mask,O=t.prev,g=t.strstart+Et,u=l[i+r-1],U=l[i+r];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do if(n=e,!(l[n+r]!==U||l[n+r-1]!==u||l[n]!==l[i]||l[++n]!==l[i+1])){i+=2,n++;do;while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<g);if(a=Et-(g-i),i=g-Et,a>r){if(t.match_start=e,r=a,a>=o)break;u=l[i+r-1],U=l[i+r]}}while((e=O[e&d])>c&&--s!==0);return r<=t.lookahead?r:t.lookahead},he=t=>{let e=t.w_size,s,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-St)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Po(t),i+=e),t.strm.avail_in===0)break;if(s=Ns(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=s,t.lookahead+t.insert>=F)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=Zt(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=Zt(t,t.ins_h,t.window[n+F-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<F)););}while(t.lookahead<St&&t.strm.avail_in!==0)},oa=(t,e)=>{let s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,i,n,a,r=0,o=t.strm.avail_in;do{if(i=65535,a=t.bi_valid+42>>3,t.strm.avail_out<a||(a=t.strm.avail_out-a,n=t.strstart-t.block_start,i>n+t.strm.avail_in&&(i=n+t.strm.avail_in),i>a&&(i=a),i<s&&(i===0&&e!==ct||e===Lt||i!==n+t.strm.avail_in)))break;r=e===ct&&i===n+t.strm.avail_in?1:0,Ps(t,0,0,r),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,ot(t.strm),n&&(n>i&&(n=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,i-=n),i&&(Ns(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(r===0);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?ue:e!==Lt&&e!==ct&&t.strm.avail_in===0&&t.strstart===t.block_start?_e:(a=t.window_size-t.strstart,t.strm.avail_in>a&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,a+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),a>t.strm.avail_in&&(a=t.strm.avail_in),a&&(Ns(t.strm,t.window,t.strstart,a),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.high_water<t.strstart&&(t.high_water=t.strstart),a=t.bi_valid+42>>3,a=t.pending_buf_size-a>65535?65535:t.pending_buf_size-a,s=a>t.w_size?t.w_size:a,n=t.strstart-t.block_start,(n>=s||(n||e===ct)&&e!==Lt&&t.strm.avail_in===0&&n<=a)&&(i=n>a?a:n,r=e===ct&&t.strm.avail_in===0&&i===n?1:0,Ps(t,t.block_start,i,r),t.block_start+=i,ot(t.strm)),r?Jt:at)},ws=(t,e)=>{let s,i;for(;;){if(t.lookahead<St){if(he(t),t.lookahead<St&&e===Lt)return at;if(t.lookahead===0)break}if(s=0,t.lookahead>=F&&(t.ins_h=Zt(t,t.ins_h,t.window[t.strstart+F-1]),s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),s!==0&&t.strstart-s<=t.w_size-St&&(t.match_length=ra(t,s)),t.match_length>=F)if(i=Nt(t,t.strstart-t.match_start,t.match_length-F),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=F){t.match_length--;do t.strstart++,t.ins_h=Zt(t,t.ins_h,t.window[t.strstart+F-1]),s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Zt(t,t.ins_h,t.window[t.strstart+1]);else i=Nt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(lt(t,!1),t.strm.avail_out===0))return at}return t.insert=t.strstart<F-1?t.strstart:F-1,e===ct?(lt(t,!0),t.strm.avail_out===0?Jt:ue):t.sym_next&&(lt(t,!1),t.strm.avail_out===0)?at:_e},ie=(t,e)=>{let s,i,n;for(;;){if(t.lookahead<St){if(he(t),t.lookahead<St&&e===Lt)return at;if(t.lookahead===0)break}if(s=0,t.lookahead>=F&&(t.ins_h=Zt(t,t.ins_h,t.window[t.strstart+F-1]),s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=F-1,s!==0&&t.prev_length<t.max_lazy_match&&t.strstart-s<=t.w_size-St&&(t.match_length=ra(t,s),t.match_length<=5&&(t.strategy===yo||t.match_length===F&&t.strstart-t.match_start>4096)&&(t.match_length=F-1)),t.prev_length>=F&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-F,i=Nt(t,t.strstart-1-t.prev_match,t.prev_length-F),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=n&&(t.ins_h=Zt(t,t.ins_h,t.window[t.strstart+F-1]),s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=F-1,t.strstart++,i&&(lt(t,!1),t.strm.avail_out===0))return at}else if(t.match_available){if(i=Nt(t,0,t.window[t.strstart-1]),i&&lt(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return at}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=Nt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<F-1?t.strstart:F-1,e===ct?(lt(t,!0),t.strm.avail_out===0?Jt:ue):t.sym_next&&(lt(t,!1),t.strm.avail_out===0)?at:_e},Ro=(t,e)=>{let s,i,n,a,r=t.window;for(;;){if(t.lookahead<=Et){if(he(t),t.lookahead<=Et&&e===Lt)return at;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=F&&t.strstart>0&&(n=t.strstart-1,i=r[n],i===r[++n]&&i===r[++n]&&i===r[++n])){a=t.strstart+Et;do;while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<a);t.match_length=Et-(a-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=F?(s=Nt(t,1,t.match_length-F),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(s=Nt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),s&&(lt(t,!1),t.strm.avail_out===0))return at}return t.insert=0,e===ct?(lt(t,!0),t.strm.avail_out===0?Jt:ue):t.sym_next&&(lt(t,!1),t.strm.avail_out===0)?at:_e},Mo=(t,e)=>{let s;for(;;){if(t.lookahead===0&&(he(t),t.lookahead===0)){if(e===Lt)return at;break}if(t.match_length=0,s=Nt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,s&&(lt(t,!1),t.strm.avail_out===0))return at}return t.insert=0,e===ct?(lt(t,!0),t.strm.avail_out===0?Jt:ue):t.sym_next&&(lt(t,!1),t.strm.avail_out===0)?at:_e};function gt(t,e,s,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=s,this.max_chain=i,this.func=n}var ye=[new gt(0,0,0,0,oa),new gt(4,4,8,4,ws),new gt(4,5,16,8,ws),new gt(4,6,32,32,ws),new gt(4,4,16,16,ie),new gt(8,16,32,32,ie),new gt(8,16,128,128,ie),new gt(8,32,128,256,ie),new gt(32,128,258,1024,ie),new gt(32,258,258,4096,ie)],Eo=t=>{t.window_size=2*t.w_size,Rt(t.head),t.max_lazy_match=ye[t.level].max_lazy,t.good_match=ye[t.level].good_length,t.nice_match=ye[t.level].nice_length,t.max_chain_length=ye[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=F-1,t.match_available=0,t.ins_h=0};function Bo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=rs,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Vo*2),this.dyn_dtree=new Uint16Array((2*Co+1)*2),this.bl_tree=new Uint16Array((2*Uo+1)*2),Rt(this.dyn_ltree),Rt(this.dyn_dtree),Rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Do+1),this.heap=new Uint16Array(2*Fs+1),Rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Fs+1),Rt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ee=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.status!==de&&e.status!==Js&&e.status!==Rs&&e.status!==Ms&&e.status!==Es&&e.status!==Bs&&e.status!==qt&&e.status!==we?1:0},la=t=>{if(Ee(t))return $t(t,vt);t.total_in=t.total_out=0,t.data_type=Oo;let e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?Js:e.wrap?de:qt,t.adler=e.wrap===2?0:1,e.last_flush=-2,co(e),st},da=t=>{let e=la(t);return e===st&&Eo(t.state),e},No=(t,e)=>Ee(t)||t.state.wrap!==2?vt:(t.state.gzhead=e,st),ha=(t,e,s,i,n,a)=>{if(!t)return vt;let r=1;if(e===wo&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>ko||s!==rs||i<8||i>15||e<0||e>9||a<0||a>vo||i===8&&r!==1)return $t(t,vt);i===8&&(i=9);let o=new Bo;return t.state=o,o.strm=t,o.status=de,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+F-1)/F),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=e,o.strategy=a,o.method=s,da(t)},Lo=(t,e)=>ha(t,e,rs,jo,Ao,So),Zo=(t,e)=>{if(Ee(t)||e>ji||e<0)return t?$t(t,vt):vt;let s=t.state;if(!t.output||t.avail_in!==0&&!t.input||s.status===we&&e!==ct)return $t(t,t.avail_out===0?gs:vt);let i=s.last_flush;if(s.last_flush=e,s.pending!==0){if(ot(t),t.avail_out===0)return s.last_flush=-1,st}else if(t.avail_in===0&&Ii(e)<=Ii(i)&&e!==ct)return $t(t,gs);if(s.status===we&&t.avail_in!==0)return $t(t,gs);if(s.status===de&&s.wrap===0&&(s.status=qt),s.status===de){let n=rs+(s.w_bits-8<<4)<<8,a=-1;if(s.strategy>=Ge||s.level<2?a=0:s.level<6?a=1:s.level===6?a=2:a=3,n|=a<<6,s.strstart!==0&&(n|=To),n+=31-n%31,ge(s,n),s.strstart!==0&&(ge(s,t.adler>>>16),ge(s,t.adler&65535)),t.adler=1,s.status=qt,ot(t),s.pending!==0)return s.last_flush=-1,st}if(s.status===Js){if(t.adler=0,E(s,31),E(s,139),E(s,8),s.gzhead)E(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),E(s,s.gzhead.time&255),E(s,s.gzhead.time>>8&255),E(s,s.gzhead.time>>16&255),E(s,s.gzhead.time>>24&255),E(s,s.level===9?2:s.strategy>=Ge||s.level<2?4:0),E(s,s.gzhead.os&255),s.gzhead.extra&&s.gzhead.extra.length&&(E(s,s.gzhead.extra.length&255),E(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=tt(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=Rs;else if(E(s,0),E(s,0),E(s,0),E(s,0),E(s,0),E(s,s.level===9?2:s.strategy>=Ge||s.level<2?4:0),E(s,zo),s.status=qt,ot(t),s.pending!==0)return s.last_flush=-1,st}if(s.status===Rs){if(s.gzhead.extra){let n=s.pending,a=(s.gzhead.extra.length&65535)-s.gzindex;for(;s.pending+a>s.pending_buf_size;){let o=s.pending_buf_size-s.pending;if(s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex,s.gzindex+o),s.pending),s.pending=s.pending_buf_size,s.gzhead.hcrc&&s.pending>n&&(t.adler=tt(t.adler,s.pending_buf,s.pending-n,n)),s.gzindex+=o,ot(t),s.pending!==0)return s.last_flush=-1,st;n=0,a-=o}let r=new Uint8Array(s.gzhead.extra);s.pending_buf.set(r.subarray(s.gzindex,s.gzindex+a),s.pending),s.pending+=a,s.gzhead.hcrc&&s.pending>n&&(t.adler=tt(t.adler,s.pending_buf,s.pending-n,n)),s.gzindex=0}s.status=Ms}if(s.status===Ms){if(s.gzhead.name){let n=s.pending,a;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>n&&(t.adler=tt(t.adler,s.pending_buf,s.pending-n,n)),ot(t),s.pending!==0)return s.last_flush=-1,st;n=0}s.gzindex<s.gzhead.name.length?a=s.gzhead.name.charCodeAt(s.gzindex++)&255:a=0,E(s,a)}while(a!==0);s.gzhead.hcrc&&s.pending>n&&(t.adler=tt(t.adler,s.pending_buf,s.pending-n,n)),s.gzindex=0}s.status=Es}if(s.status===Es){if(s.gzhead.comment){let n=s.pending,a;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>n&&(t.adler=tt(t.adler,s.pending_buf,s.pending-n,n)),ot(t),s.pending!==0)return s.last_flush=-1,st;n=0}s.gzindex<s.gzhead.comment.length?a=s.gzhead.comment.charCodeAt(s.gzindex++)&255:a=0,E(s,a)}while(a!==0);s.gzhead.hcrc&&s.pending>n&&(t.adler=tt(t.adler,s.pending_buf,s.pending-n,n))}s.status=Bs}if(s.status===Bs){if(s.gzhead.hcrc){if(s.pending+2>s.pending_buf_size&&(ot(t),s.pending!==0))return s.last_flush=-1,st;E(s,t.adler&255),E(s,t.adler>>8&255),t.adler=0}if(s.status=qt,ot(t),s.pending!==0)return s.last_flush=-1,st}if(t.avail_in!==0||s.lookahead!==0||e!==Lt&&s.status!==we){let n=s.level===0?oa(s,e):s.strategy===Ge?Mo(s,e):s.strategy===mo?Ro(s,e):ye[s.level].func(s,e);if((n===Jt||n===ue)&&(s.status=we),n===at||n===Jt)return t.avail_out===0&&(s.last_flush=-1),st;if(n===_e&&(e===uo?_o(s):e!==ji&&(Ps(s,0,0,!1),e===po&&(Rt(s.head),s.lookahead===0&&(s.strstart=0,s.block_start=0,s.insert=0))),ot(t),t.avail_out===0))return s.last_flush=-1,st}return e!==ct?st:s.wrap<=0?Ai:(s.wrap===2?(E(s,t.adler&255),E(s,t.adler>>8&255),E(s,t.adler>>16&255),E(s,t.adler>>24&255),E(s,t.total_in&255),E(s,t.total_in>>8&255),E(s,t.total_in>>16&255),E(s,t.total_in>>24&255)):(ge(s,t.adler>>>16),ge(s,t.adler&65535)),ot(t),s.wrap>0&&(s.wrap=-s.wrap),s.pending!==0?st:Ai)},Ho=t=>{if(Ee(t))return vt;let e=t.state.status;return t.state=null,e===qt?$t(t,go):st},Go=(t,e)=>{let s=e.length;if(Ee(t))return vt;let i=t.state,n=i.wrap;if(n===2||n===1&&i.status!==de||i.lookahead)return vt;if(n===1&&(t.adler=De(t.adler,e,s,0)),i.wrap=0,s>=i.w_size){n===0&&(Rt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let c=new Uint8Array(i.w_size);c.set(e.subarray(s-i.w_size,s),0),e=c,s=i.w_size}let a=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=s,t.next_in=0,t.input=e,he(i);i.lookahead>=F;){let c=i.strstart,l=i.lookahead-(F-1);do i.ins_h=Zt(i,i.ins_h,i.window[c+F-1]),i.prev[c&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=c,c++;while(--l);i.strstart=c,i.lookahead=F-1,he(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=F-1,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=a,i.wrap=n,st},Yo=Lo,Xo=ha,Wo=da,Ko=la,qo=No,$o=Zo,Qo=Ho,Jo=Go,tl=\"pako deflate (from Nodeca project)\",Se={deflateInit:Yo,deflateInit2:Xo,deflateReset:Wo,deflateResetKeep:Ko,deflateSetHeader:qo,deflate:$o,deflateEnd:Qo,deflateSetDictionary:Jo,deflateInfo:tl},el=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),sl=function(t){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let s=e.shift();if(s){if(typeof s!=\"object\")throw new TypeError(s+\"must be non-object\");for(let i in s)el(s,i)&&(t[i]=s[i])}}return t},il=t=>{let e=0;for(let i=0,n=t.length;i<n;i++)e+=t[i].length;let s=new Uint8Array(e);for(let i=0,n=0,a=t.length;i<a;i++){let r=t[i];s.set(r,n),n+=r.length}return s},os={assign:sl,flattenChunks:il},ba=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ba=!1}var Te=new Uint8Array(256);for(let t=0;t<256;t++)Te[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Te[254]=Te[254]=1;var nl=t=>{if(typeof TextEncoder==\"function\"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,s,i,n,a,r=t.length,o=0;for(n=0;n<r;n++)s=t.charCodeAt(n),(s&64512)===55296&&n+1<r&&(i=t.charCodeAt(n+1),(i&64512)===56320&&(s=65536+(s-55296<<10)+(i-56320),n++)),o+=s<128?1:s<2048?2:s<65536?3:4;for(e=new Uint8Array(o),a=0,n=0;a<o;n++)s=t.charCodeAt(n),(s&64512)===55296&&n+1<r&&(i=t.charCodeAt(n+1),(i&64512)===56320&&(s=65536+(s-55296<<10)+(i-56320),n++)),s<128?e[a++]=s:s<2048?(e[a++]=192|s>>>6,e[a++]=128|s&63):s<65536?(e[a++]=224|s>>>12,e[a++]=128|s>>>6&63,e[a++]=128|s&63):(e[a++]=240|s>>>18,e[a++]=128|s>>>12&63,e[a++]=128|s>>>6&63,e[a++]=128|s&63);return e},al=(t,e)=>{if(e<65534&&t.subarray&&ba)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let s=\"\";for(let i=0;i<e;i++)s+=String.fromCharCode(t[i]);return s},rl=(t,e)=>{let s=e||t.length;if(typeof TextDecoder==\"function\"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let i,n,a=new Array(s*2);for(n=0,i=0;i<s;){let r=t[i++];if(r<128){a[n++]=r;continue}let o=Te[r];if(o>4){a[n++]=65533,i+=o-1;continue}for(r&=o===2?31:o===3?15:7;o>1&&i<s;)r=r<<6|t[i++]&63,o--;if(o>1){a[n++]=65533;continue}r<65536?a[n++]=r:(r-=65536,a[n++]=55296|r>>10&1023,a[n++]=56320|r&1023)}return al(a,n)},ol=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let s=e-1;for(;s>=0&&(t[s]&192)===128;)s--;return s<0||s===0?e:s+Te[t[s]]>e?s:e},ze={string2buf:nl,buf2string:rl,utf8border:ol};function ll(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}var ca=ll,fa=Object.prototype.toString,{Z_NO_FLUSH:dl,Z_SYNC_FLUSH:hl,Z_FULL_FLUSH:bl,Z_FINISH:cl,Z_OK:ss,Z_STREAM_END:fl,Z_DEFAULT_COMPRESSION:_l,Z_DEFAULT_STRATEGY:ul,Z_DEFLATED:pl}=fe;function Be(t){this.options=os.assign({level:_l,method:pl,chunkSize:16384,windowBits:15,memLevel:8,strategy:ul},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new ca,this.strm.avail_out=0;let s=Se.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(s!==ss)throw new Error(Qt[s]);if(e.header&&Se.deflateSetHeader(this.strm,e.header),e.dictionary){let i;if(typeof e.dictionary==\"string\"?i=ze.string2buf(e.dictionary):fa.call(e.dictionary)===\"[object ArrayBuffer]\"?i=new Uint8Array(e.dictionary):i=e.dictionary,s=Se.deflateSetDictionary(this.strm,i),s!==ss)throw new Error(Qt[s]);this._dict_set=!0}}Be.prototype.push=function(t,e){let s=this.strm,i=this.options.chunkSize,n,a;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?cl:dl,typeof t==\"string\"?s.input=ze.string2buf(t):fa.call(t)===\"[object ArrayBuffer]\"?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;){if(s.avail_out===0&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),(a===hl||a===bl)&&s.avail_out<=6){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if(n=Se.deflate(s,a),n===fl)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),n=Se.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===ss;if(s.avail_out===0){this.onData(s.output);continue}if(a>0&&s.next_out>0){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if(s.avail_in===0)break}return!0};Be.prototype.onData=function(t){this.chunks.push(t)};Be.prototype.onEnd=function(t){t===ss&&(this.result=os.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function ti(t,e){let s=new Be(e);if(s.push(t,!0),s.err)throw s.msg||Qt[s.err];return s.result}function gl(t,e){return e=e||{},e.raw=!0,ti(t,e)}function wl(t,e){return e=e||{},e.gzip=!0,ti(t,e)}var yl=Be,ml=ti,vl=gl,Sl=wl,Ol=fe,kl={Deflate:yl,deflate:ml,deflateRaw:vl,gzip:Sl,constants:Ol},Ye=16209,jl=16191,Al=function(t,e){let s,i,n,a,r,o,c,l,d,O,g,u,U,z,x,I,k,m,j,G,P,T,f,y,p=t.state;s=t.next_in,f=t.input,i=s+(t.avail_in-5),n=t.next_out,y=t.output,a=n-(e-t.avail_out),r=n+(t.avail_out-257),o=p.dmax,c=p.wsize,l=p.whave,d=p.wnext,O=p.window,g=p.hold,u=p.bits,U=p.lencode,z=p.distcode,x=(1<<p.lenbits)-1,I=(1<<p.distbits)-1;t:do{u<15&&(g+=f[s++]<<u,u+=8,g+=f[s++]<<u,u+=8),k=U[g&x];e:for(;;){if(m=k>>>24,g>>>=m,u-=m,m=k>>>16&255,m===0)y[n++]=k&65535;else if(m&16){j=k&65535,m&=15,m&&(u<m&&(g+=f[s++]<<u,u+=8),j+=g&(1<<m)-1,g>>>=m,u-=m),u<15&&(g+=f[s++]<<u,u+=8,g+=f[s++]<<u,u+=8),k=z[g&I];s:for(;;){if(m=k>>>24,g>>>=m,u-=m,m=k>>>16&255,m&16){if(G=k&65535,m&=15,u<m&&(g+=f[s++]<<u,u+=8,u<m&&(g+=f[s++]<<u,u+=8)),G+=g&(1<<m)-1,G>o){t.msg=\"invalid distance too far back\",p.mode=Ye;break t}if(g>>>=m,u-=m,m=n-a,G>m){if(m=G-m,m>l&&p.sane){t.msg=\"invalid distance too far back\",p.mode=Ye;break t}if(P=0,T=O,d===0){if(P+=c-m,m<j){j-=m;do y[n++]=O[P++];while(--m);P=n-G,T=y}}else if(d<m){if(P+=c+d-m,m-=d,m<j){j-=m;do y[n++]=O[P++];while(--m);if(P=0,d<j){m=d,j-=m;do y[n++]=O[P++];while(--m);P=n-G,T=y}}}else if(P+=d-m,m<j){j-=m;do y[n++]=O[P++];while(--m);P=n-G,T=y}for(;j>2;)y[n++]=T[P++],y[n++]=T[P++],y[n++]=T[P++],j-=3;j&&(y[n++]=T[P++],j>1&&(y[n++]=T[P++]))}else{P=n-G;do y[n++]=y[P++],y[n++]=y[P++],y[n++]=y[P++],j-=3;while(j>2);j&&(y[n++]=y[P++],j>1&&(y[n++]=y[P++]))}}else if((m&64)===0){k=z[(k&65535)+(g&(1<<m)-1)];continue s}else{t.msg=\"invalid distance code\",p.mode=Ye;break t}break}}else if((m&64)===0){k=U[(k&65535)+(g&(1<<m)-1)];continue e}else if(m&32){p.mode=jl;break t}else{t.msg=\"invalid literal/length code\",p.mode=Ye;break t}break}}while(s<i&&n<r);j=u>>3,s-=j,u-=j<<3,g&=(1<<u)-1,t.next_in=s,t.next_out=n,t.avail_in=s<i?5+(i-s):5-(s-i),t.avail_out=n<r?257+(r-n):257-(n-r),p.hold=g,p.bits=u},ne=15,xi=852,Ci=592,Ui=0,ys=1,Vi=2,Il=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),xl=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Cl=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ul=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Vl=(t,e,s,i,n,a,r,o)=>{let c=o.bits,l=0,d=0,O=0,g=0,u=0,U=0,z=0,x=0,I=0,k=0,m,j,G,P,T,f=null,y,p=new Uint16Array(ne+1),w=new Uint16Array(ne+1),S=null,D,V,A;for(l=0;l<=ne;l++)p[l]=0;for(d=0;d<i;d++)p[e[s+d]]++;for(u=c,g=ne;g>=1&&p[g]===0;g--);if(u>g&&(u=g),g===0)return n[a++]=1<<24|64<<16|0,n[a++]=1<<24|64<<16|0,o.bits=1,0;for(O=1;O<g&&p[O]===0;O++);for(u<O&&(u=O),x=1,l=1;l<=ne;l++)if(x<<=1,x-=p[l],x<0)return-1;if(x>0&&(t===Ui||g!==1))return-1;for(w[1]=0,l=1;l<ne;l++)w[l+1]=w[l]+p[l];for(d=0;d<i;d++)e[s+d]!==0&&(r[w[e[s+d]]++]=d);if(t===Ui?(f=S=r,y=20):t===ys?(f=Il,S=xl,y=257):(f=Cl,S=Ul,y=0),k=0,d=0,l=O,T=a,U=u,z=0,G=-1,I=1<<u,P=I-1,t===ys&&I>xi||t===Vi&&I>Ci)return 1;for(;;){D=l-z,r[d]+1<y?(V=0,A=r[d]):r[d]>=y?(V=S[r[d]-y],A=f[r[d]-y]):(V=32+64,A=0),m=1<<l-z,j=1<<U,O=j;do j-=m,n[T+(k>>z)+j]=D<<24|V<<16|A|0;while(j!==0);for(m=1<<l-1;k&m;)m>>=1;if(m!==0?(k&=m-1,k+=m):k=0,d++,--p[l]===0){if(l===g)break;l=e[s+r[d]]}if(l>u&&(k&P)!==G){for(z===0&&(z=u),T+=O,U=l-z,x=1<<U;U+z<g&&(x-=p[U+z],!(x<=0));)U++,x<<=1;if(I+=1<<U,t===ys&&I>xi||t===Vi&&I>Ci)return 1;G=k&P,n[G]=u<<24|U<<16|T-a|0}}return k!==0&&(n[T+k]=l-z<<24|64<<16|0),o.bits=u,0},Oe=Vl,Dl=0,_a=1,ua=2,{Z_FINISH:Di,Z_BLOCK:Tl,Z_TREES:Xe,Z_OK:te,Z_STREAM_END:zl,Z_NEED_DICT:Pl,Z_STREAM_ERROR:pt,Z_DATA_ERROR:pa,Z_MEM_ERROR:ga,Z_BUF_ERROR:Fl,Z_DEFLATED:Ti}=fe,ls=16180,zi=16181,Pi=16182,Fi=16183,Ri=16184,Mi=16185,Ei=16186,Bi=16187,Ni=16188,Li=16189,is=16190,kt=16191,ms=16192,Zi=16193,vs=16194,Hi=16195,Gi=16196,Yi=16197,Xi=16198,We=16199,Ke=16200,Wi=16201,Ki=16202,qi=16203,$i=16204,Qi=16205,Ss=16206,Ji=16207,tn=16208,H=16209,wa=16210,ya=16211,Rl=852,Ml=592,El=15,Bl=El,en=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Nl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ee=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.mode<ls||e.mode>ya?1:0},ma=t=>{if(ee(t))return pt;let e=t.state;return t.total_in=t.total_out=e.total=0,t.msg=\"\",e.wrap&&(t.adler=e.wrap&1),e.mode=ls,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Rl),e.distcode=e.distdyn=new Int32Array(Ml),e.sane=1,e.back=-1,te},va=t=>{if(ee(t))return pt;let e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ma(t)},Sa=(t,e)=>{let s;if(ee(t))return pt;let i=t.state;return e<0?(s=0,e=-e):(s=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?pt:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=s,i.wbits=e,va(t))},Oa=(t,e)=>{if(!t)return pt;let s=new Nl;t.state=s,s.strm=t,s.window=null,s.mode=ls;let i=Sa(t,e);return i!==te&&(t.state=null),i},Ll=t=>Oa(t,Bl),sn=!0,Os,ks,Zl=t=>{if(sn){Os=new Int32Array(512),ks=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Oe(_a,t.lens,0,288,Os,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Oe(ua,t.lens,0,32,ks,0,t.work,{bits:5}),sn=!1}t.lencode=Os,t.lenbits=9,t.distcode=ks,t.distbits=5},ka=(t,e,s,i)=>{let n,a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(e.subarray(s-a.wsize,s),0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),a.window.set(e.subarray(s-i,s-i+n),a.wnext),i-=n,i?(a.window.set(e.subarray(s-i,s),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0},Hl=(t,e)=>{let s,i,n,a,r,o,c,l,d,O,g,u,U,z,x=0,I,k,m,j,G,P,T,f,y=new Uint8Array(4),p,w,S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ee(t)||!t.output||!t.input&&t.avail_in!==0)return pt;s=t.state,s.mode===kt&&(s.mode=ms),r=t.next_out,n=t.output,c=t.avail_out,a=t.next_in,i=t.input,o=t.avail_in,l=s.hold,d=s.bits,O=o,g=c,f=te;t:for(;;)switch(s.mode){case ls:if(s.wrap===0){s.mode=ms;break}for(;d<16;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if(s.wrap&2&&l===35615){s.wbits===0&&(s.wbits=15),s.check=0,y[0]=l&255,y[1]=l>>>8&255,s.check=tt(s.check,y,2,0),l=0,d=0,s.mode=zi;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((l&255)<<8)+(l>>8))%31){t.msg=\"incorrect header check\",s.mode=H;break}if((l&15)!==Ti){t.msg=\"unknown compression method\",s.mode=H;break}if(l>>>=4,d-=4,T=(l&15)+8,s.wbits===0&&(s.wbits=T),T>15||T>s.wbits){t.msg=\"invalid window size\",s.mode=H;break}s.dmax=1<<s.wbits,s.flags=0,t.adler=s.check=1,s.mode=l&512?Li:kt,l=0,d=0;break;case zi:for(;d<16;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if(s.flags=l,(s.flags&255)!==Ti){t.msg=\"unknown compression method\",s.mode=H;break}if(s.flags&57344){t.msg=\"unknown header flags set\",s.mode=H;break}s.head&&(s.head.text=l>>8&1),s.flags&512&&s.wrap&4&&(y[0]=l&255,y[1]=l>>>8&255,s.check=tt(s.check,y,2,0)),l=0,d=0,s.mode=Pi;case Pi:for(;d<32;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}s.head&&(s.head.time=l),s.flags&512&&s.wrap&4&&(y[0]=l&255,y[1]=l>>>8&255,y[2]=l>>>16&255,y[3]=l>>>24&255,s.check=tt(s.check,y,4,0)),l=0,d=0,s.mode=Fi;case Fi:for(;d<16;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}s.head&&(s.head.xflags=l&255,s.head.os=l>>8),s.flags&512&&s.wrap&4&&(y[0]=l&255,y[1]=l>>>8&255,s.check=tt(s.check,y,2,0)),l=0,d=0,s.mode=Ri;case Ri:if(s.flags&1024){for(;d<16;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}s.length=l,s.head&&(s.head.extra_len=l),s.flags&512&&s.wrap&4&&(y[0]=l&255,y[1]=l>>>8&255,s.check=tt(s.check,y,2,0)),l=0,d=0}else s.head&&(s.head.extra=null);s.mode=Mi;case Mi:if(s.flags&1024&&(u=s.length,u>o&&(u=o),u&&(s.head&&(T=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(i.subarray(a,a+u),T)),s.flags&512&&s.wrap&4&&(s.check=tt(s.check,i,u,a)),o-=u,a+=u,s.length-=u),s.length))break t;s.length=0,s.mode=Ei;case Ei:if(s.flags&2048){if(o===0)break t;u=0;do T=i[a+u++],s.head&&T&&s.length<65536&&(s.head.name+=String.fromCharCode(T));while(T&&u<o);if(s.flags&512&&s.wrap&4&&(s.check=tt(s.check,i,u,a)),o-=u,a+=u,T)break t}else s.head&&(s.head.name=null);s.length=0,s.mode=Bi;case Bi:if(s.flags&4096){if(o===0)break t;u=0;do T=i[a+u++],s.head&&T&&s.length<65536&&(s.head.comment+=String.fromCharCode(T));while(T&&u<o);if(s.flags&512&&s.wrap&4&&(s.check=tt(s.check,i,u,a)),o-=u,a+=u,T)break t}else s.head&&(s.head.comment=null);s.mode=Ni;case Ni:if(s.flags&512){for(;d<16;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if(s.wrap&4&&l!==(s.check&65535)){t.msg=\"header crc mismatch\",s.mode=H;break}l=0,d=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),t.adler=s.check=0,s.mode=kt;break;case Li:for(;d<32;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}t.adler=s.check=en(l),l=0,d=0,s.mode=is;case is:if(s.havedict===0)return t.next_out=r,t.avail_out=c,t.next_in=a,t.avail_in=o,s.hold=l,s.bits=d,Pl;t.adler=s.check=1,s.mode=kt;case kt:if(e===Tl||e===Xe)break t;case ms:if(s.last){l>>>=d&7,d-=d&7,s.mode=Ss;break}for(;d<3;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}switch(s.last=l&1,l>>>=1,d-=1,l&3){case 0:s.mode=Zi;break;case 1:if(Zl(s),s.mode=We,e===Xe){l>>>=2,d-=2;break t}break;case 2:s.mode=Gi;break;case 3:t.msg=\"invalid block type\",s.mode=H}l>>>=2,d-=2;break;case Zi:for(l>>>=d&7,d-=d&7;d<32;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if((l&65535)!==(l>>>16^65535)){t.msg=\"invalid stored block lengths\",s.mode=H;break}if(s.length=l&65535,l=0,d=0,s.mode=vs,e===Xe)break t;case vs:s.mode=Hi;case Hi:if(u=s.length,u){if(u>o&&(u=o),u>c&&(u=c),u===0)break t;n.set(i.subarray(a,a+u),r),o-=u,a+=u,c-=u,r+=u,s.length-=u;break}s.mode=kt;break;case Gi:for(;d<14;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if(s.nlen=(l&31)+257,l>>>=5,d-=5,s.ndist=(l&31)+1,l>>>=5,d-=5,s.ncode=(l&15)+4,l>>>=4,d-=4,s.nlen>286||s.ndist>30){t.msg=\"too many length or distance symbols\",s.mode=H;break}s.have=0,s.mode=Yi;case Yi:for(;s.have<s.ncode;){for(;d<3;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}s.lens[S[s.have++]]=l&7,l>>>=3,d-=3}for(;s.have<19;)s.lens[S[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,p={bits:s.lenbits},f=Oe(Dl,s.lens,0,19,s.lencode,0,s.work,p),s.lenbits=p.bits,f){t.msg=\"invalid code lengths set\",s.mode=H;break}s.have=0,s.mode=Xi;case Xi:for(;s.have<s.nlen+s.ndist;){for(;x=s.lencode[l&(1<<s.lenbits)-1],I=x>>>24,k=x>>>16&255,m=x&65535,!(I<=d);){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if(m<16)l>>>=I,d-=I,s.lens[s.have++]=m;else{if(m===16){for(w=I+2;d<w;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if(l>>>=I,d-=I,s.have===0){t.msg=\"invalid bit length repeat\",s.mode=H;break}T=s.lens[s.have-1],u=3+(l&3),l>>>=2,d-=2}else if(m===17){for(w=I+3;d<w;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}l>>>=I,d-=I,T=0,u=3+(l&7),l>>>=3,d-=3}else{for(w=I+7;d<w;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}l>>>=I,d-=I,T=0,u=11+(l&127),l>>>=7,d-=7}if(s.have+u>s.nlen+s.ndist){t.msg=\"invalid bit length repeat\",s.mode=H;break}for(;u--;)s.lens[s.have++]=T}}if(s.mode===H)break;if(s.lens[256]===0){t.msg=\"invalid code -- missing end-of-block\",s.mode=H;break}if(s.lenbits=9,p={bits:s.lenbits},f=Oe(_a,s.lens,0,s.nlen,s.lencode,0,s.work,p),s.lenbits=p.bits,f){t.msg=\"invalid literal/lengths set\",s.mode=H;break}if(s.distbits=6,s.distcode=s.distdyn,p={bits:s.distbits},f=Oe(ua,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,p),s.distbits=p.bits,f){t.msg=\"invalid distances set\",s.mode=H;break}if(s.mode=We,e===Xe)break t;case We:s.mode=Ke;case Ke:if(o>=6&&c>=258){t.next_out=r,t.avail_out=c,t.next_in=a,t.avail_in=o,s.hold=l,s.bits=d,Al(t,g),r=t.next_out,n=t.output,c=t.avail_out,a=t.next_in,i=t.input,o=t.avail_in,l=s.hold,d=s.bits,s.mode===kt&&(s.back=-1);break}for(s.back=0;x=s.lencode[l&(1<<s.lenbits)-1],I=x>>>24,k=x>>>16&255,m=x&65535,!(I<=d);){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if(k&&(k&240)===0){for(j=I,G=k,P=m;x=s.lencode[P+((l&(1<<j+G)-1)>>j)],I=x>>>24,k=x>>>16&255,m=x&65535,!(j+I<=d);){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}l>>>=j,d-=j,s.back+=j}if(l>>>=I,d-=I,s.back+=I,s.length=m,k===0){s.mode=Qi;break}if(k&32){s.back=-1,s.mode=kt;break}if(k&64){t.msg=\"invalid literal/length code\",s.mode=H;break}s.extra=k&15,s.mode=Wi;case Wi:if(s.extra){for(w=s.extra;d<w;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}s.length+=l&(1<<s.extra)-1,l>>>=s.extra,d-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=Ki;case Ki:for(;x=s.distcode[l&(1<<s.distbits)-1],I=x>>>24,k=x>>>16&255,m=x&65535,!(I<=d);){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if((k&240)===0){for(j=I,G=k,P=m;x=s.distcode[P+((l&(1<<j+G)-1)>>j)],I=x>>>24,k=x>>>16&255,m=x&65535,!(j+I<=d);){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}l>>>=j,d-=j,s.back+=j}if(l>>>=I,d-=I,s.back+=I,k&64){t.msg=\"invalid distance code\",s.mode=H;break}s.offset=m,s.extra=k&15,s.mode=qi;case qi:if(s.extra){for(w=s.extra;d<w;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}s.offset+=l&(1<<s.extra)-1,l>>>=s.extra,d-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){t.msg=\"invalid distance too far back\",s.mode=H;break}s.mode=$i;case $i:if(c===0)break t;if(u=g-c,s.offset>u){if(u=s.offset-u,u>s.whave&&s.sane){t.msg=\"invalid distance too far back\",s.mode=H;break}u>s.wnext?(u-=s.wnext,U=s.wsize-u):U=s.wnext-u,u>s.length&&(u=s.length),z=s.window}else z=n,U=r-s.offset,u=s.length;u>c&&(u=c),c-=u,s.length-=u;do n[r++]=z[U++];while(--u);s.length===0&&(s.mode=Ke);break;case Qi:if(c===0)break t;n[r++]=s.length,c--,s.mode=Ke;break;case Ss:if(s.wrap){for(;d<32;){if(o===0)break t;o--,l|=i[a++]<<d,d+=8}if(g-=c,t.total_out+=g,s.total+=g,s.wrap&4&&g&&(t.adler=s.check=s.flags?tt(s.check,n,g,r-g):De(s.check,n,g,r-g)),g=c,s.wrap&4&&(s.flags?l:en(l))!==s.check){t.msg=\"incorrect data check\",s.mode=H;break}l=0,d=0}s.mode=Ji;case Ji:if(s.wrap&&s.flags){for(;d<32;){if(o===0)break t;o--,l+=i[a++]<<d,d+=8}if(s.wrap&4&&l!==(s.total&4294967295)){t.msg=\"incorrect length check\",s.mode=H;break}l=0,d=0}s.mode=tn;case tn:f=zl;break t;case H:f=pa;break t;case wa:return ga;case ya:default:return pt}return t.next_out=r,t.avail_out=c,t.next_in=a,t.avail_in=o,s.hold=l,s.bits=d,(s.wsize||g!==t.avail_out&&s.mode<H&&(s.mode<Ss||e!==Di))&&ka(t,t.output,t.next_out,g-t.avail_out),O-=t.avail_in,g-=t.avail_out,t.total_in+=O,t.total_out+=g,s.total+=g,s.wrap&4&&g&&(t.adler=s.check=s.flags?tt(s.check,n,g,t.next_out-g):De(s.check,n,g,t.next_out-g)),t.data_type=s.bits+(s.last?64:0)+(s.mode===kt?128:0)+(s.mode===We||s.mode===vs?256:0),(O===0&&g===0||e===Di)&&f===te&&(f=Fl),f},Gl=t=>{if(ee(t))return pt;let e=t.state;return e.window&&(e.window=null),t.state=null,te},Yl=(t,e)=>{if(ee(t))return pt;let s=t.state;return(s.wrap&2)===0?pt:(s.head=e,e.done=!1,te)},Xl=(t,e)=>{let s=e.length,i,n,a;return ee(t)||(i=t.state,i.wrap!==0&&i.mode!==is)?pt:i.mode===is&&(n=1,n=De(n,e,s,0),n!==i.check)?pa:(a=ka(t,e,s,s),a?(i.mode=wa,ga):(i.havedict=1,te))},Wl=va,Kl=Sa,ql=ma,$l=Ll,Ql=Oa,Jl=Hl,td=Gl,ed=Yl,sd=Xl,id=\"pako inflate (from Nodeca project)\",xt={inflateReset:Wl,inflateReset2:Kl,inflateResetKeep:ql,inflateInit:$l,inflateInit2:Ql,inflate:Jl,inflateEnd:td,inflateGetHeader:ed,inflateSetDictionary:sd,inflateInfo:id};function nd(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}var ad=nd,ja=Object.prototype.toString,{Z_NO_FLUSH:rd,Z_FINISH:od,Z_OK:Pe,Z_STREAM_END:js,Z_NEED_DICT:As,Z_STREAM_ERROR:ld,Z_DATA_ERROR:nn,Z_MEM_ERROR:dd}=fe;function Ne(t){this.options=os.assign({chunkSize:1024*64,windowBits:15,to:\"\"},t||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new ca,this.strm.avail_out=0;let s=xt.inflateInit2(this.strm,e.windowBits);if(s!==Pe)throw new Error(Qt[s]);if(this.header=new ad,xt.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary==\"string\"?e.dictionary=ze.string2buf(e.dictionary):ja.call(e.dictionary)===\"[object ArrayBuffer]\"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(s=xt.inflateSetDictionary(this.strm,e.dictionary),s!==Pe)))throw new Error(Qt[s])}Ne.prototype.push=function(t,e){let s=this.strm,i=this.options.chunkSize,n=this.options.dictionary,a,r,o;if(this.ended)return!1;for(e===~~e?r=e:r=e===!0?od:rd,ja.call(t)===\"[object ArrayBuffer]\"?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),a=xt.inflate(s,r),a===As&&n&&(a=xt.inflateSetDictionary(s,n),a===Pe?a=xt.inflate(s,r):a===nn&&(a=As));s.avail_in>0&&a===js&&s.state.wrap>0&&t[s.next_in]!==0;)xt.inflateReset(s),a=xt.inflate(s,r);switch(a){case ld:case nn:case As:case dd:return this.onEnd(a),this.ended=!0,!1}if(o=s.avail_out,s.next_out&&(s.avail_out===0||a===js))if(this.options.to===\"string\"){let c=ze.utf8border(s.output,s.next_out),l=s.next_out-c,d=ze.buf2string(s.output,c);s.next_out=l,s.avail_out=i-l,l&&s.output.set(s.output.subarray(c,c+l),0),this.onData(d)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(a===Pe&&o===0)){if(a===js)return a=xt.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};Ne.prototype.onData=function(t){this.chunks.push(t)};Ne.prototype.onEnd=function(t){t===Pe&&(this.options.to===\"string\"?this.result=this.chunks.join(\"\"):this.result=os.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function ei(t,e){let s=new Ne(e);if(s.push(t),s.err)throw s.msg||Qt[s.err];return s.result}function hd(t,e){return e=e||{},e.raw=!0,ei(t,e)}var bd=Ne,cd=ei,fd=hd,_d=ei,ud=fe,pd={Inflate:bd,inflate:cd,inflateRaw:fd,ungzip:_d,constants:ud},{Deflate:jd,deflate:Ad,deflateRaw:gd,gzip:Id}=kl,{Inflate:xd,inflate:Cd,inflateRaw:wd,ungzip:Ud}=pd,yd=gd,md=wd,Aa=t=>md(t),Ls=t=>yd(t,{level:9}),vd=class{sendClientMessage(t,e){t.finish(e),this.doSendMessage(Ls(t.asUint8Array()))}pendingMessages=[];getPendingMessages(){return this.pendingMessages}markPendingMessagesAsRead(){this.pendingMessages.length=0}onMessage(t){this.pendingMessages.push(ut.getRootAsServerMessage(new Dt(Aa(t))))}onDisconnection(){me(\"disconnected\")}},Sd=class{sendServerMessageTo(t,e,s){e.finish(s),this.doSendMessageTo(t,Ls(e.asUint8Array()))}sendServerMessageToAll(t,e){t.finish(e);let s=Ls(t.asUint8Array());for(let i of this.usersPendingMessages.keys())this.doSendMessageTo(i,s)}usersPendingMessages=new Map;getUsersPendingMessages(){return this.usersPendingMessages.entries()}getConnectedUsers(){return this.usersPendingMessages.keys()}disconnectedUsers=[];getDisconnectedUsers(){return this.disconnectedUsers}onMessage(t,e){this.usersPendingMessages.get(t).push(At.getRootAsClientMessage(new Dt(Aa(e))))}onConnection(t){this.usersPendingMessages.set(t,[])}onDisconnection(t){this.usersPendingMessages.delete(t),this.disconnectedUsers.push(t)}};gdjs.BBTextRuntimeObject&&(gdjs.BBTextRuntimeObject.prototype.getString=gdjs.BBTextRuntimeObject.prototype.getBBText,gdjs.BBTextRuntimeObject.prototype.setString=gdjs.BBTextRuntimeObject.prototype.setBBText),gdjs.BitmapTextRuntimeObject&&(gdjs.BitmapTextRuntimeObject.prototype.getString=gdjs.BitmapTextRuntimeObject.prototype.getText,gdjs.BitmapTextRuntimeObject.prototype.setString=gdjs.BitmapTextRuntimeObject.prototype.setText,gdjs.BitmapTextRuntimeObject.prototype.getColor=gdjs.BitmapTextRuntimeObject.prototype.getTint,gdjs.BitmapTextRuntimeObject.prototype.setColor=gdjs.BitmapTextRuntimeObject.prototype.setTint);return Da(Od);})();\n/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n{",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Triggers if the current scene is in singleplayer mode. When switching to a scene normally (without connecting to a remote scene), the game runs in this mode and doesn't run any netcode, while still emulating the THNK framework to allow the game to run as it would otherwise. This condition can be used to disable features that only make sense in multiplayer, like a chat, in the case the game is not being played in multiplayer.",
      "fullName": "Is singleplayer?",
      "functionType": "Condition",
      "name": "IsSinglePlayer",
      "sentence": "Scene running in singleplayer mode",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "// If we are neither client nor server, we are playing singleplayer.",
            "eventsFunctionContext.returnValue = !runtimeScene.thnkServer && !runtimeScene.thnkClient;",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "fullName": "",
      "functionType": "Action",
      "name": "___Client___",
      "private": true,
      "sentence": "",
      "events": [],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Checks if the game is currently running a server. Do not use this to delimit server code, as this ignores the server tick rate. Rather, use this in client code to display additional options reseerved to the host",
      "fullName": "Is a server?",
      "functionType": "Condition",
      "group": "Client only",
      "name": "IsServer",
      "sentence": "A server is running on this client",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "eventsFunctionContext.returnValue = !!runtimeScene.thnkServer;",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "The condition to put before the start of client code. This ensures that dedicated servers do not run client-only code.",
      "fullName": "Running client code",
      "functionType": "Condition",
      "group": "Client only",
      "name": "StartClientCode",
      "sentence": "Currently running on the client",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "eventsFunctionContext.returnValue = !THNK.settings.DEDICATED;",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Checks if a connection to a server/remote scene is currently in progress.",
      "fullName": "Is connecting to the server?",
      "functionType": "Condition",
      "group": "Client only",
      "name": "ConnectingToServer",
      "sentence": "Connecting to server",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "eventsFunctionContext.returnValue = THNK.client.getConnectionState() === \"connecting\";",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Checks if the connection to the server has failed. If the connection succeeded, the game would have switched to the remote scene.",
      "fullName": "Connection to server failed",
      "functionType": "Condition",
      "group": "Client only",
      "name": "ConnectionFailed",
      "private": true,
      "sentence": "Connection to the server has failed",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "UNIMPLEMENTED",
          "comment2": ""
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Gives the error code returned by the server while attempting a connection",
      "fullName": "Server connection error code",
      "functionType": "StringExpression",
      "group": "Client only",
      "name": "ServerConnectionError",
      "private": true,
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "UNIMPLEMENTED",
          "comment2": ""
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Sends a message to the server.",
      "fullName": "Send a message to the server",
      "functionType": "Action",
      "group": "Client only",
      "name": "SendMessage",
      "sentence": "Send message _PARAM1_ to the server (extra data: _PARAM2_)",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "if (runtimeScene.thnkClient) {",
            "    THNK.client.messages.sendClientMessage(",
            "        runtimeScene.thnkClient.adapter,",
            "        eventsFunctionContext.getArgument(\"message\"),",
            "        eventsFunctionContext.getArgument(\"extra_data\")",
            "    );",
            "} else THNK.server.events.addRawMessageToTheQueue(",
            "    runtimeScene.thnkServer",
            "        ? runtimeScene.thnkServer.adapter.getServerID()",
            "        : THNK.players.getCurrentPlayerID(),",
            "    eventsFunctionContext.getArgument(\"message\"),",
            "    eventsFunctionContext.getArgument(\"extra_data\")",
            ");",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The message name",
          "name": "message",
          "type": "string"
        },
        {
          "description": "(Optional) A variable with extra data for the server",
          "name": "extra_data",
          "type": "scenevar"
        }
      ],
      "objectGroups": []
    },
    {
      "fullName": "",
      "functionType": "Action",
      "name": "___Server___",
      "private": true,
      "sentence": "",
      "events": [],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "The condition to put before the start of server code. Ensures that events meant for the server are only run when needed.",
      "fullName": "Running server code",
      "functionType": "Condition",
      "group": "Server only",
      "name": "StartServerCode",
      "sentence": "Server code should run",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "eventsFunctionContext.returnValue = runtimeScene.thnkServer ",
            "    // The server is active, only run server code if it is time to.",
            "    ? runtimeScene.thnkServer.runServerCode ",
            "    // The server is innactive. Only run the server code if client mode is innactive too, as that'd mean singleplayer.",
            "    : !runtimeScene.thnkClient;",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Give the server a target of ticks per second. A tick is when the server side code is executed. Default is 20.",
      "fullName": "Set target tick rate",
      "functionType": "Action",
      "group": "Server only",
      "name": "SetServerTickRate",
      "sentence": "Set server target TPS to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": []
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "THNK.settings.setTickRate(eventsFunctionContext.getArgument(\"TargetTPS\"));",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The new TPS target",
          "name": "TargetTPS",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Sets the currently picked player to another one, by its ID.",
      "fullName": "Pick a player (by ID)",
      "functionType": "Action",
      "group": "Server only",
      "name": "PickPlayerByID",
      "sentence": "Set the picked player to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "eventsFunctionContext.returnValue =",
            "    THNK.players.switchPlayerContext(eventsFunctionContext.getArgument(\"PlayerID\"));",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The ID of the picked player",
          "name": "PlayerID",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "the ID of the player that is currently picked. The picked player is set by THNK conditions to the player that initiated that event, and will be used to target with other THNK actions and conditions.",
      "fullName": "Currenty picked player's ID",
      "functionType": "ExpressionAndCondition",
      "group": "Server only",
      "name": "PickedPlayer",
      "sentence": "Currently picked player's ID is ",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "eventsFunctionContext.returnValue = THNK.players.getCurrentPlayerID();",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Triggered when a message from the client has been received.",
      "fullName": "Received message from client",
      "functionType": "Condition",
      "group": "Server only",
      "name": "OnMessage",
      "sentence": "Client sent message _PARAM1_ (extra data: _PARAM2_)",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "if (!runtimeScene.thnkClient) eventsFunctionContext.returnValue = THNK.server.events.popMessage(",
            "    eventsFunctionContext.getArgument(\"message\"),",
            "    eventsFunctionContext.getArgument(\"extra_data\")",
            ");",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The name of the message",
          "name": "message",
          "type": "string"
        },
        {
          "description": "(Optional) A variable with extra data from the client",
          "name": "extra_data",
          "type": "scenevar"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Triggers when a client has connected to the scene.",
      "fullName": "On client connected",
      "functionType": "Condition",
      "group": "Server only",
      "name": "OnClientConnect",
      "sentence": "A client has connected",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "In singleplayer, there is only one player. Trigger their connection event one at the start and that's it.",
          "comment2": ""
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "THNK::IsSinglePlayer"
              },
              "parameters": [
                "",
                ""
              ]
            },
            {
              "type": {
                "value": "DepartScene"
              },
              "parameters": [
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "if (runtimeScene.thnkServer) eventsFunctionContext.returnValue = THNK.server.events.popConnection(runtimeScene);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Triggers when a client has disconnected from the scene.",
      "fullName": "On client disconnected",
      "functionType": "Condition",
      "group": "Server only",
      "name": "OnClientDisconnect",
      "sentence": "A client has disconnected",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "if (runtimeScene.thnkServer) eventsFunctionContext.returnValue = THNK.server.events.popDisconnection(runtimeScene);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [
    {
      "description": "Makes the THNK framework automatically synchronize instances of an object across clients. To be used for objects like moving terrain, player objects, etc: objects that will display the same for every user.\nNot to be used on objects unique to a single user, like an inventory menu. Prefer to send over variables the contents of the inventory and display it with non-synchronized objects.",
      "fullName": "Synchronize object",
      "name": "SynchronizedObject",
      "objectType": "",
      "eventsFunctions": [
        {
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPreEvents",
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "ObjectVariableAsBoolean"
                  },
                  "parameters": [
                    "Object",
                    "__THNK.Initialized",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "SetObjectVariableAsBoolean"
                  },
                  "parameters": [
                    "Object",
                    "__THNK.Initialized",
                    "True"
                  ]
                }
              ],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "if (runtimeScene.thnkServer)",
                    "    runtimeScene.thnkServer.objectsRegistery.registerObject(objects[0]);",
                    "",
                    "if (runtimeScene.thnkClient && typeof objects[0].thnkID !== \"number\") {",
                    "    // Object was not created by the server but the game is in client mode, delete it.",
                    "    objects[0].deleteFromScene(runtimeScene);",
                    "",
                    "    // Workaround a GDevelop bug that creates a ghost object when deleting an object at the beginning of the scene",
                    "    if (runtimeScene.getTimeManager().isFirstFrame()) {",
                    "        runtimeScene.getAsyncTasksManager().addTask(new gdjs.ResolveTask(), () => {",
                    "            objects[0].onDestroyFromScene(runtimeScene);",
                    "        });",
                    "    }",
                    "}",
                    ""
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "THNK::SynchronizedObject",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "fullName": "",
          "functionType": "Action",
          "name": "onDestroy",
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "if (runtimeScene.thnkServer)",
                "    runtimeScene.thnkServer.objectsRegistery.unregisterObject(objects[0]);",
                ""
              ],
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "THNK::SynchronizedObject",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [],
      "sharedPropertyDescriptors": []
    },
    {
      "description": "Marks an object as belonging to a player, allowing to create it on a player connection, delete it when the player disconnects, follow it with the camera, and more.",
      "fullName": "Player object",
      "name": "Player",
      "objectType": "",
      "eventsFunctions": [
        {
          "fullName": "",
          "functionType": "Action",
          "name": "onCreated",
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "if (runtimeScene.thnkServer) THNK.server.PlayerBehavior.onObjectCreated(objects[0]);",
                ""
              ],
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "THNK::Player",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPreEvents",
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "THNK::Player::PropertyFollowWithCamera"
                  },
                  "parameters": [
                    "Object",
                    "Behavior"
                  ]
                },
                {
                  "type": {
                    "value": "THNK::Player::PickInstanceLinkedToPlayer"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "CentreCamera"
                  },
                  "parameters": [
                    "",
                    "Object",
                    "",
                    "\"\"",
                    "0"
                  ]
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "THNK::Player",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Picks the instance(s) of the object owned by the picked player. In client events, this will pick the objects owned by the current client, since the picked player is always the local client in client-mode.",
          "fullName": "Owned by current player",
          "functionType": "Condition",
          "name": "PickInstanceLinkedToPlayer",
          "sentence": "_PARAM0_ is owned by the picked player",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "if (runtimeScene.thnkServer)",
                "    eventsFunctionContext.returnValue =",
                "        THNK.server.PlayerBehavior.pickObjectsOfPlayer(",
                "            eventsFunctionContext.getObjectsLists(\"Object\")",
                "        );",
                "else",
                "    eventsFunctionContext.returnValue =",
                "        THNK.client.PlayerBehavior.pickObjectsOfPlayer(",
                "            eventsFunctionContext.getObjectsLists(\"Object\")",
                "        );",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "THNK::Player",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Picks the player that owns this object.",
          "fullName": "Pick player",
          "functionType": "Action",
          "name": "PickLinkedPlayer",
          "sentence": "Pick player linked to _PARAM0_",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "if (runtimeScene.thnkServer) {",
                "    THNK.server.PlayerBehavior.pickPlayerOfObject(objects[0]);",
                "}",
                ""
              ],
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "THNK::Player",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Discards the link with the player established on object creation, linking the object with the currently picked player instead.",
          "fullName": "Link object to the current player",
          "functionType": "Action",
          "group": "Server only",
          "name": "ReLink",
          "sentence": "Link _PARAM0_ to currenly picked player",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "if(runtimeScene.thnkServer) {",
                "    THNK.server.PlayerBehavior.changeObjectOwnerToPickedPlayer(objects[0])",
                "}",
                ""
              ],
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "THNK::Player",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [
        {
          "value": "true",
          "type": "Boolean",
          "label": "Enable creating object on connection",
          "description": "Upon creation, the object will always be linked to the current player.",
          "group": "Create object on connection",
          "extraInformation": [],
          "hidden": false,
          "name": "CreateOnConnect"
        },
        {
          "value": "0",
          "type": "Number",
          "label": "Object creation X position",
          "description": "",
          "group": "Create object on connection",
          "extraInformation": [],
          "hidden": false,
          "name": "CreateOnConnectX"
        },
        {
          "value": "0",
          "type": "Number",
          "label": "Object creation Y position",
          "description": "",
          "group": "Create object on connection",
          "extraInformation": [],
          "hidden": false,
          "name": "CreateOnConnectY"
        },
        {
          "value": "true",
          "type": "Boolean",
          "label": "Enable deleting object when the linked player disconnects",
          "description": "",
          "group": "Delete object on disconnection",
          "extraInformation": [],
          "hidden": false,
          "name": "DeleteOnDisconnect"
        },
        {
          "value": "true",
          "type": "Boolean",
          "label": "Follow the owned player with the camera on the client",
          "description": "This will use the \"Center camera on object\" action. It is recommended to use the \"Enforce camera boundaries\" action alongside this behavior. Disable this option if you prefer to use the smooth camera extension or your own camera interpolation.",
          "group": "Camera",
          "extraInformation": [],
          "hidden": false,
          "name": "FollowWithCamera"
        }
      ],
      "sharedPropertyDescriptors": []
    }
  ],
  "eventsBasedObjects": []
}